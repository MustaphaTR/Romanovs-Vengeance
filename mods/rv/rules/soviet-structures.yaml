nacnst:
	Inherits: ^ConstructionYard
	Buildable:
		BuildPaletteOrder: 20
	ProvidesPrerequisite@soviets:
		Prerequisite: structures.soviets
	Production:
		Produces: Building.Soviets, Building.Baku, Support.Soviets, Support.Baku
	ProductionQueue@Building:
		Type: Building.Soviets
		Factions: america, germany, england, france, korea, japan, belarus, poland, ukraine, aussie, china, turkey, canada, cuba, libya, iraq, russia, vietnam, chile, mexico, mongolia, psicorps, psinepal, psisouth, psitrans, psimoon
	ProductionQueue@BuildingBaku:
		Type: Building.Baku
		Factions: transcaucus, turkmen, tuva, russianfed, serbia
		Group: Building
		LowPowerModifier: 200
		ReadyAudio: ConstructionComplete
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Building
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Support:
		Type: Support.Soviets
		Factions: america, germany, england, france, korea, japan, belarus, poland, ukraine, aussie, china, turkey, canada, cuba, libya, iraq, russia, vietnam, chile, mexico, mongolia, psicorps, psinepal, psisouth, psitrans, psimoon
	ProductionQueue@SupportBaku:
		Type: Support.Baku
		Factions: transcaucus, turkmen, tuva, russianfed, serbia
		Group: Support
		LowPowerModifier: 200
		ReadyAudio: ConstructionComplete
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Building
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionBar@Building:
		ProductionType: Building.Soviets
	ProductionBar@BuildingBaku:
		ProductionType: Building.Baku
	ProductionBar@Support:
		ProductionType: Support.Soviets
	ProductionBar@SupportBaku:
		ProductionType: Support.Baku
		Color: 8A8A8A
	Transforms:
		IntoActor: smcv
	WithIdleOverlay@top:
		Sequence: idle-top
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	WithIdleOverlay@normal:
		Sequence: idle-normal
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	WithBuildingPlacedAnimation:
		RequiresCondition: !build-incomplete
	GrantConditionOnFaction@USSR:
		Condition: russia
		Factions: russia
	GrantConditionOnFaction@Iraq:
		Condition: iraq
		Factions: iraq
	GrantConditionOnFaction@Vietnam:
		Condition: vietnam
		Factions: vietnam
	GrantConditionOnFaction@Cuba:
		Condition: cuba
		Factions: cuba
	GrantConditionOnFaction@Libya:
		Condition: libya
		Factions: libya
	GrantConditionOnFaction@Chile:
		Condition: chile
		Factions: chile
	GrantConditionOnFaction@Mexico:
		Condition: mexico
		Factions: mexico
	GrantConditionOnFaction@Mongolia:
		Condition: mongolia
		Factions: mongolia
	GrantConditionOnFaction@Transcaucasia:
		Condition: transcaucus
		Factions: transcaucus
	GrantConditionOnFaction@Turkmenistan:
		Condition: turkmen
		Factions: turkmen
	GrantConditionOnFaction@Tuva:
		Condition: tuva
		Factions: tuva
	GrantConditionOnFaction@Russia:
		Condition: russianfed
		Factions: russianfed
	GrantConditionOnFaction@Serbia:
		Condition: serbia
		Factions: serbia
	WithIdleOverlay@USSR:
		Sequence: flag-russia
		Palette: ussr
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && russia
	WithIdleOverlay@Iraq:
		Sequence: flag-iraq
		Palette: iraq
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && iraq
	WithIdleOverlay@Vietnam:
		Sequence: flag-vietnam
		Palette: vietnam
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && vietnam
	WithIdleOverlay@Cuba:
		Sequence: flag-cuba
		Palette: cuba
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && cuba
	WithIdleOverlay@Libya:
		Sequence: flag-libya
		Palette: libya
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && libya
	WithIdleOverlay@Chile:
		Sequence: flag-chile
		Palette: chile
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && chile
	WithIdleOverlay@Mexico:
		Sequence: flag-mexico
		Palette: mexico
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && mexico
	WithIdleOverlay@Mongolia:
		Sequence: flag-mongolia
		Palette: mongolia
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && mongolia
	WithIdleOverlay@Transcaucasia:
		Sequence: flag-transcaucus
		Palette: transcaucasia
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && transcaucus
	WithIdleOverlay@Turkmenistan:
		Sequence: flag-turkmen
		Palette: turkmenistan
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && turkmen
	WithIdleOverlay@Tuva:
		Sequence: flag-tuva
		Palette: tuva
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && tuva
	WithIdleOverlay@Russia:
		Sequence: flag-russianfed
		Palette: russia
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && russianfed
	WithIdleOverlay@Serbia:
		Sequence: flag-serbia
		Palette: serbia
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && serbia
	WithIdleOverlay@FlagShadow:
		Sequence: flag-shadow
		Palette: shadow
		IsPlayerPalette: false
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && (russia || iraq || vietnam || cuba || libya || chile || mexico || mongolia || transcaucus || turkmen || tuva || russianfed || serbia)
	WithIdleOverlay@HNS:
		Sequence: idle-hns
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && (russia || iraq || vietnam || cuba || libya || chile || mexico || mongolia)
	WithIdleOverlay@Star:
		Sequence: idle-star
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && (transcaucus || turkmen || tuva || russianfed || serbia)
	IsometricSelectable:
		DecorationHeight: 90
	Voiced:
		VoiceSet: SovietConstructionYardVoice
	RenderSprites:
		Image: nacnst

napowr:
	Inherits: ^PowerPlant
	Inherits@SHAPE: ^3x2Shape
	Buildable:
		Queue: Building.Soviets, Building.Baku
		Description: Provides power for other structures.\n\n  Can be rotated.
	Tooltip:
		Name: Tesla Reactor
	Tooltip@NoRow:
		Name: Tesla Reactor
	Building:
		Footprint: xxx xxx
		Dimensions: 3,2
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	PlaceBuildingVariants:
		Actors: napowb
	IsometricSelectable:
		DecorationHeight: 45
	Voiced:
		VoiceSet: PowerPlantVoice
		Volume: 0.8

nahand:
	Inherits: ^Barracks
	Inherits@SHAPE: ^2x2Shape
	Buildable:
		Queue: Building.Soviets
		Description: Trains Soviet infantry.\n\n  Can be rotated.
	Building:
		Footprint: xx xx
		Dimensions: 2,2
	Exit@1:
		SpawnOffset: -512,768,0
		ExitCell: 1,2
		Priority: 2
	Exit@2:
		SpawnOffset: -512,768,0
		ExitCell: 0,2
		Priority: 2
	Exit@fallback1:
		SpawnOffset: 0,724,0
		ExitCell: 2,2
	Exit@fallback2:
		SpawnOffset: 0,724,0
		ExitCell: 2,1
	Exit@fallback3:
		SpawnOffset: 724,0,0
		ExitCell: 2,0
	Exit@fallback4:
		SpawnOffset: 724,0,0
		ExitCell: 2,-1
	Exit@fallback5:
		SpawnOffset: 724,0,0
		ExitCell: 1,-1
	Exit@fallback6:
		SpawnOffset: 0,-724,0
		ExitCell: 0,-1
	Exit@fallback7:
		SpawnOffset: 0,-724,0
		ExitCell: -1,-1
	Exit@fallback8:
		SpawnOffset: 0,-724,0
		ExitCell: -1,0
	Exit@fallback9:
		SpawnOffset: -724,0,0
		ExitCell: -1,1
	Exit@fallback10:
		SpawnOffset: -724,0,0
		ExitCell: -1,2
	Production:
		Produces: Infantry.Soviets, Infantry.Cuba, Infantry.Iraq
	ProductionQueue:
		Type: Infantry.Soviets
		Factions: america, germany, england, france, korea, japan, belarus, poland, ukraine, aussie, china, turkey, canada, libya, russia, vietnam, chile, mexico, mongolia, psicorps, psinepal, psisouth, psitrans, psimoon, transcaucus, turkmen, tuva, russianfed, serbia
	ProductionQueue@Cuba:
		Type: Infantry.Cuba
		Factions: cuba
		Group: Infantry
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Iraq:
		Type: Infantry.Iraq
		Factions: iraq
		Group: Infantry
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionBar:
		ProductionType: Infantry.Soviets
	ProductionBar@Cuba:
		ProductionType: Infantry.Cuba
	ProductionBar@Iraq:
		ProductionType: Infantry.Iraq
	RallyPoint:
		Path: 3,3
	ProvidesPrerequisite@nahand:
		Prerequisite: nahand
	ProvidesPrerequisite@mwfacref:
		Prerequisite: narefn
	IsometricSelectable:
		DecorationHeight: 135

narefn:
	Inherits: ^Refinery
	Buildable:
		Queue: Building.Soviets, Building.Baku
	FreeActor:
		Actor: harv
	SmokeParticleEmitter@refinerysmoke1:
		Offset: -1024,-384,4096
	SmokeParticleEmitter@refinerysmoke2:
		Offset: 128,-1408,4096
	PlaceBuildingVariants:
		Actors: narefb #, narefc, narefd
	IsometricSelectable:
		DecorationHeight: 90

naradr:
	Inherits: ^Radar
	Inherits@SHAPE: ^2x2Shape
	Inherits@AI: ^AIMicroManagable
	Buildable:
		Queue: Building.Soviets, Building.Baku
		Prerequisites: power, narefn, ~techlevel.2, ~!ai.naradr
		Description: Provides radar.\nResearches basic upgrades.\n\nProvides a different support power depening on the subfaction:\n- Tesla Drop (Soviet Union)\n- Radiation Missile (Iraq)\n- Instant Bunker (Vietnam)\n- Death Bombs (Cuba)\n- Ambush (Libya)
	ProvidesPrerequisite@AIbuildinglimit:
		RequiresCondition: ai-control
		Prerequisite: ai.naradr
	Tooltip:
		Name: Radar Tower
	Tooltip@NoRow:
		Name: Radar Tower
	ProvidesPrerequisite@russia:
		Prerequisite: radar.russia
		Factions: russia
	ProvidesPrerequisite@iraq:
		Prerequisite: radar.iraq
		Factions: iraq
	ProvidesPrerequisite@vietnam:
		Prerequisite: radar.vietnam
		Factions: vietnam
	ProvidesPrerequisite@cuba:
		Prerequisite: radar.cuba
		Factions: cuba
	ProvidesPrerequisite@libya:
		Prerequisite: radar.libya
		Factions: libya
	ProvidesPrerequisite@baku:
		Prerequisite: radar.baku
		Factions: transcaucus, turkmen, tuva, russianfed, serbia
	ProvidesPrerequisite@upgrade.russia:
		Prerequisite: upgrade.russia
		Factions: russia
	ProvidesPrerequisite@upgrade.iraq:
		Prerequisite: upgrade.iraq
		Factions: iraq
	ProvidesPrerequisite@upgrade.vietnam:
		Prerequisite: upgrade.vietnam
		Factions: vietnam
	ProvidesPrerequisite@upgrade.cuba:
		Prerequisite: upgrade.cuba
		Factions: cuba
	ProvidesPrerequisite@upgrade.libya:
		Prerequisite: upgrade.libya
		Factions: libya
	ProvidesPrerequisite@upgrade.soviets:
		Prerequisite: upgrade.soviets
	Building:
		Footprint: xx xx
		Dimensions: 2,2
	ParatroopersPower@tesladrop:
		OrderName: RussianTeslaDrop
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.russia
		Icons:
			1: tesladrop
		ChargeInterval: 4500
		Names:
			1: Tesla Drop
		Descriptions:
			1: A Cargo Plane drops a Tesla Tank\n and 3 Tesla Troopers anywhere on the map.
		SelectTargetSpeechNotification: SelectTarget
		EndChargeSpeechNotification: ParatroopersReady
		DropItems:
			1: shk, shk, shk, ttnk
		SquadSizes:
			1: 1
		QuantizedFacings: 8
		UnitTypes:
			1: pdplane
		CameraActor: camera
		DisplayBeacon: True
		BeaconPosters:
			1: tesdicon
		ArrowSequence: arrow
		ClockSequence: clock
		UseDirectionalTarget: True
		DirectionArrowAnimation: swdirection
		DirectionArrowPalette: mouse
	NukePower@radiationmissile:
		OrderName: IraqiRadMissile
		Cursor: nuke
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.iraq
			2: upgrade.advanced_irradiators
		Icons:
			1: radmissile
			2: radmissile
		ChargeInterval: 6000
		Names:
			1: Radiation Missile
			2: Radiation Missile
		Descriptions:
			1: Fires a missile that deals low damage\nand leaves radiation.
			2: Fires a missile that deals low damage\nand leaves radiation.
		LaunchSound: sradlaun.wav
		SelectTargetSpeechNotification: SelectTarget
		MissileWeapons:
			1: RadiationMissile
			2: RadiationMissileOrange
		MissileImage: RadiationMissile
		MissilePalette: player
		IsPlayerPalette: true
		CameraRange: 8c0
		CameraRemoveDelay: 200
		FlightVelocity: 1c0
		FlightDelay: 100
		DisplayBeacon: True
		BeaconPosters:
			1: radmicon
			2: radmicon
		ArrowSequence: arrow
		ClockSequence: clock
		TrailInterval: 0
		TrailImage: smokeyrad
		TrailSequences: idle
		CircleRanges:
			1: 4c0
			2: 4c0
		CircleColor: FFFFFFFF
		CircleBorderColor: 00000060
	DetonateWeaponPower@instanbunker:
		OrderName: VietnameseInstantBunker
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.vietnam
		Icons:
			1: bunker
		ChargeInterval: 3000
		Names:
			1: Instant Bunker
		Descriptions:
			1: Places a bunker anywhere on the map.
		SelectTargetSpeechNotification: SelectTarget
		Weapons:
			1: BunkerSpawner
		ActivationSequence:
	DetonateWeaponPower@ambush:
		OrderName: LibyanAmbush
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.libya
		Icons:
			1: ambush
		ChargeInterval: 6000
		Names:
			1: Ambush
		Descriptions:
			1: Spawns 9 Conscripts and 6 Flak Troopers\nanywhere on the map.
		SelectTargetSpeechNotification: SelectTarget
		Weapons:
			1: AmbushSpawner
		ActivationSequence:
		CameraRange: 8c0
		CameraRemoveDelay: 25
	GrantExternalConditionPower@deathbombs:
		OrderName: CubanDeathBombs
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.cuba
		Icons:
			1: deathbombs
		ChargeInterval: 3000
		Names:
			1: Death Bombs
		Descriptions:
			1: Arms a group of friendly units with explosives that trigger when unit dies.
		SelectTargetSpeechNotification: SelectTarget
		Durations:
			1: -1
		Conditions:
			1: deathbombs
		Dimensions:
			1: 3,3
		Footprints:
			1: _x_ xxx _x_
		OnFireSound: icraatta.wav
	AirstrikePowerRV@clustermines:
		ActivationDelay: 125
		OrderName: CubanClusterMines
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: disabled
		Icons:
			1: cluster
		ChargeInterval: 4500
		Names:
			1: Cluster Mines
		Descriptions:
			1: A Cargo plane drops 13 mines\nanywhere on the map.
		SelectTargetSpeechNotification: SelectTarget
		IncomingSpeechNotification: WarningEnemyAirstrikeInitiated
		UnitTypes:
			1: pdplane.cluster_mines
		SquadSizes:
			1: 1
		QuantizedFacings: 8
		CameraActor: camera.5c0
		DisplayBeacon: True
		BeaconPosters:
			1: mineicon
		ArrowSequence: arrow
		ClockSequence: clock
		UseDirectionalTarget: True
		DirectionArrowAnimation: swdirection
		DirectionArrowPalette: mouse
	AirstrikePower@leafletdrop:
		OrderName: BakuPactLeafletDrop
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.baku
		Icons:
			1: leaflet
		ChargeInterval: 3750
		Names:
			1: Leaflet Drop
		Descriptions:
			1: A Cargo Plane drops leaflets\nanywhere on the map.\nLeaflets slow enemy infantry\nand vehicle movement and\nfire speed.
		SelectTargetSpeechNotification: SelectTarget
		IncomingSpeechNotification: WarningEnemyAirstrikeInitiated
		UnitTypes:
			1: pdplane.leaflet.baku
		SquadSizes:
			1: 1
		QuantizedFacings: 8
		CameraActor: CAMERA
		CameraRemoveDelay: 100
		DisplayBeacon: True
		BeaconPosters:
			1: leaficon
		ArrowSequence: arrow
		ClockSequence: clock
		UseDirectionalTarget: True
		DirectionArrowAnimation: swdirection
		DirectionArrowPalette: mouse
	WithIdleOverlay@dish:
		Sequence: idle-dish
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	GrantCondition@IDISABLE:
		RequiresCondition: lowpower || powerdown || emp
	IsometricSelectable:
		DecorationHeight: 90

mine:
	Inherits@1: ^SpriteActor
	Interactable:
		Bounds: 579, 1158
	WithSpriteBody:
	HiddenUnderFog:
	RevealsShroud:
		Range: 1c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 1c0
	Mine:
		CrushClasses: mine
		DetonateClasses: mine
		BlockFriendly: false
	Health:
		HP: 5000
		NotifyAppliedDamage: false
	Armor:
		Type: Light
	Cloak:
		CloakSound:
		UncloakSound:
		Palette:
		InitialDelay: 0
	Tooltip:
		Name: Mine
		GenericName: Mine
		RequiresCondition: showownername
	Tooltip@NoRow:
		Name: Mine
		GenericName: Mine
		ShowOwnerRow: false
		RequiresCondition: !showownername
	GrantConditionOnPrerequisite@SHOWOWNERNAME:
		Condition: showownername
		Prerequisites: global-showownername
	Targetable:
		TargetTypes: Ground, Mine
	Mobile:
		Speed: 1
		Locomotor: wheeled
	RejectsOrders:
	HitShape:
	MapEditorData:
		Categories: System
	Explodes:
		Weapon: MineExplosion
	RenderSprites:
		PlayerPalette: infantry

naweap:
	Inherits: ^WarFactory
	Buildable:
		Queue: Building.Soviets, Building.Baku
		Description: Produces Soviet vehicles.\n\n  Can be rotated.
	ProvidesPrerequisite@naweap:
		Prerequisite: naweap
	Production:
		Produces: Vehicle.Soviets, Vehicle.USSR, Vehicle.Iraq, Vehicle.Cuba, Vehicle.Libya, Vehicle.Baku
	ProductionQueue:
		Type: Vehicle.Soviets
		Factions: america, germany, england, france, korea, japan, belarus, poland, ukraine, aussie, china, turkey, canada, vietnam, chile, mexico, mongolia, psicorps, psinepal, psisouth, psitrans, psimoon
	ProductionQueue@USSR:
		Type: Vehicle.USSR
		Factions: russia
		Group: Vehicle
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Iraq:
		Type: Vehicle.Iraq
		Factions: iraq
		Group: Vehicle
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Cuba:
		Type: Vehicle.Cuba
		Factions: cuba
		Group: Vehicle
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Libya:
		Type: Vehicle.Libya
		Factions: libya
		Group: Vehicle
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Baku:
		Type: Vehicle.Baku
		Factions: transcaucus, turkmen, tuva, russianfed, serbia
		Group: Vehicle
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionBar:
		ProductionType: Vehicle.Soviets
	ProductionBar@USSR:
		ProductionType: Vehicle.USSR
	ProductionBar@Iraq:
		ProductionType: Vehicle.Iraq
	ProductionBar@Cuba:
		ProductionType: Vehicle.Cuba
	ProductionBar@Libya:
		ProductionType: Vehicle.Libya
	ProductionBar@Baku:
		ProductionType: Vehicle.Baku
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	PlaceBuildingVariants:
		Actors: naweab #, naweac, nawead
	IsometricSelectable:
		DecorationHeight: 90

nayard:
	Inherits: ^Shipyard
	Buildable:
		Queue: Building.Soviets, Building.Baku
	Production:
		Produces: Ship.Soviets
	ProductionQueue:
		Type: Ship.Soviets
	ProductionBar:
		ProductionType: Ship.Soviets
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	AirstrikePower@navalmines:
		OrderName: SovietNavalMines
		PauseOnCondition: disabled || chronodisable
		Icons:
			1: navalmines
		Prerequisites:
			1: nayard
		ChargeInterval: 3000
		Names:
			1: Naval Mines
		Descriptions:
			1: A Cargo plane drops 5 naval mines\nanywhere on the map.
		SelectTargetSpeechNotification: SelectTarget
		UnitTypes:
			1: pdplane.naval_mines
		SquadSizes:
			1: 1
		QuantizedFacings: 8
		CameraActor: camera.5c0
		DisplayBeacon: True
		BeaconPosters:
			1: nmineicon
		ArrowSequence: arrow
		ClockSequence: clock
		UseDirectionalTarget: True
		DirectionArrowAnimation: swdirection
		DirectionArrowPalette: mouse
	IsometricSelectable:
		DecorationHeight: 120

nmine:
	Inherits: mine
	Mine:
		CrushClasses: nmine
		DetonateClasses: nmine
	Tooltip:
		Name: Naval Mine
	Tooltip@NoRow:
		Name: Naval Mine
	RevealsShroud:
		Range: 3c0
	# RevealsShroudToIntelligenceOwner:
	#	Range: 3c0
	Targetable:
		TargetTypes: Ground, Water, Underwater, Mine
	-Mobile:
	Building:
		Footprint: x
		Dimensions: 1,1
		TerrainTypes: Water
	Cloak:
		CloakTypes: Cloak, Underwater
	Explodes:
		Weapon: MineExplosion
	RenderSprites:
		PlayerPalette: player

nadept:
	Inherits: ^ServiceDepot
	Inherits@SHAPE: ^4x3Shape
	HitShape:
		TargetableOffsets: 0,0,0, -360,360,0, 360,-360,0, -1080,1080,0, -360,1800,0, -1800,360,0, 360,1080,0, -360,-1080,0, 1080,360,0, -1080,-360,0
	Buildable:
		Queue: Building.Soviets, Building.Baku
		Prerequisites: naweap, ~techlevel.1
		Description: Repairs vehicles and removes Terror Drones for a price.\n\n  Can be rotated.
	ProvidesPrerequisite@default:
		Prerequisite: nadept
	Building:
		Footprint: x+++ x+++ x+++
		Dimensions: 4,3
	RallyPoint:
		Path: 4,1
	WithSpriteBody:
		PauseOnCondition: chronodisable
	WithIdleOverlay@normal:
		Sequence: idle-normal
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	PlaceBuildingVariants:
		Actors: nadepb
	IsometricSelectable:
		DecorationHeight: 90

naheli:
	Inherits: ^Helipad
	Buildable:
		Queue: Building.Soviets
		Prerequisites: naradr, ~techlevel.2
		Description: Produces Soviet aircraft.
	Tooltip:
		Name: Helipad
	Tooltip@NoRow:
		Name: Helipad
	Exit@1:
		SpawnOffset: -384,128,0
	Production:
		Produces: Aircraft.Soviets, Aircraft.USSR, Aircraft.Vietnam, Aircraft.Cuba, Aircraft.Libya
	ProductionQueue:
		Type: Aircraft.Soviets
		Factions: america, germany, england, france, korea, japan, belarus, poland, ukraine, aussie, china, turkey, canada, iraq, chile, mexico, mongolia, psicorps, psinepal, psisouth, psitrans, psimoon, transcaucus, turkmen, tuva, russianfed, serbia
	ProductionQueue@USSR:
		Type: Aircraft.USSR
		Factions: russia
		Group: Aircraft
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Vietnam:
		Type: Aircraft.Vietnam
		Factions: vietnam
		Group: Aircraft
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Cuba:
		Type: Aircraft.Cuba
		Factions: cuba
		Group: Aircraft
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Libya:
		Type: Aircraft.Libya
		Factions: libya
		Group: Aircraft
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionBar:
		ProductionType: Aircraft.Soviets
	ProductionBar@USSR:
		ProductionType: Aircraft.USSR
	ProductionBar@Vietnam:
		ProductionType: Aircraft.Vietnam
	ProductionBar@Cuba:
		ProductionType: Aircraft.Cuba
	ProductionBar@Libya:
		ProductionType: Aircraft.Libya
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	WithIdleOverlay@dish:
		Sequence: idle-dish
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	IsometricSelectable:
		DecorationHeight: 60

nanrct:
	Inherits: ^PowerPlant
	Inherits@ADVIRRAD: ^AffectedByAdvancedIrradiators
	Inherits@SHAPE: ^4x4Shape
	Buildable:
		Queue: Building.Soviets, Building.Baku
		BuildPaletteOrder: 110
		Prerequisites: natech, ~techlevel.3
		BuildDuration: 1000
	Valued:
		Cost: 1500
	Tooltip:
		Name: Nuclear Reactor
	Tooltip@NoRow:
		Name: Nuclear Reactor
	Building:
		Footprint: xxxx xxxx xxxx _xx_
		Dimensions: 4,4
	Health:
		HP: 100000
	Armor:
		Type: Concrete
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && !advirrad
	WithIdleOverlay@lights-orange:
		Sequence: idle-lights-orange
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && advirrad
	Explodes:
		Type: CenterPosition
		Weapon: NukePayload
		EmptyWeapon: NukePayload
		RequiresCondition: !advirrad
	Explodes@Orange:
		Type: CenterPosition
		Weapon: NukePayloadOrange
		EmptyWeapon: NukePayloadOrange
		RequiresCondition: advirrad
	Power:
		Amount: 1000
	IsometricSelectable:
		DecorationHeight: 60
	Voiced:
		VoiceSet: NuclearReactorVoice
		Volume: 0.8

natech:
	Inherits: ^BattleLab
	Inherits@SHAPE: ^3x3Shape
	Inherits@AI: ^AIMicroManagable
	Buildable:
		Queue: Building.Soviets, Building.Baku
		Prerequisites: production, naradr, ~techlevel.3, ~!ai.natech
		Description: Allows deployment of advanced units.
	ProvidesPrerequisite@default:
	ProvidesPrerequisite@upgrade.soviets:
		Prerequisite: upgrade.soviets
	ProvidesPrerequisite@upgrade.russia:
		Prerequisite: upgrade.russia
		Factions: russia
	ProvidesPrerequisite@upgrade.iraq:
		Prerequisite: upgrade.iraq
		Factions: iraq
	ProvidesPrerequisite@upgrade.vietnam:
		Prerequisite: upgrade.vietnam
		Factions: vietnam
	ProvidesPrerequisite@upgrade.cuba:
		Prerequisite: upgrade.cuba
		Factions: cuba
	ProvidesPrerequisite@upgrade.libya:
		Prerequisite: upgrade.libya
		Factions: libya
	ProvidesPrerequisite@AIbuildinglimit:
		RequiresCondition: ai-control
		Prerequisite: ai.natech
	Building:
		Footprint: xxx xxx xxx
		Dimensions: 3,3
	InfiltrateForSupportPower:
		Proxy: soviets.tech.infiltrated
	IsometricSelectable:
		DecorationHeight: 120
	Voiced:
		VoiceSet: TechCenterVoice
		Volume: 0.8

naclon:
	Inherits: ^BaseBuilding
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@MC: ^MindControllableBuilding
	Inherits@SHAPE: ^2x2Shape
	Buildable:
		Queue: Building.Unused # Building.Soviets, Building.Baku
		BuildPaletteOrder: 120
		Prerequisites: natech
		Description: Clones most trained infantry.\n\n  Maximum 1 can be built.
		BuildLimit: 1
	Valued:
		Cost: 2000
	Tooltip:
		Name: Cloning Vats
	Tooltip@NoRow:
		Name: Cloning Vats
	Building:
		Footprint: xx xx
		Dimensions: 2, 2
	Health:
		HP: 75000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 6c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	Power:
		Amount: -200
		RequiresCondition: !chronodisable
	ExitsDebugOverlay:
	Exit@1:
		SpawnOffset: -640,640,0
		ExitCell: 1,2
		Priority: 2
	Exit@2:
		SpawnOffset: -640,640,0
		ExitCell: 0,2
		Priority: 2
	Exit@fallback1:
		SpawnOffset: 0,724,0
		ExitCell: 2,2
	Exit@fallback2:
		SpawnOffset: 0,724,0
		ExitCell: 2,1
	Exit@fallback3:
		SpawnOffset: 724,0,0
		ExitCell: 2,0
	Exit@fallback4:
		SpawnOffset: 724,0,0
		ExitCell: 2,-1
	Exit@fallback5:
		SpawnOffset: 724,0,0
		ExitCell: 1,-1
	Exit@fallback6:
		SpawnOffset: 0,-724,0
		ExitCell: 0,-1
	Exit@fallback7:
		SpawnOffset: 0,-724,0
		ExitCell: -1,-1
	Exit@fallback8:
		SpawnOffset: 0,-724,0
		ExitCell: -1,0
	Exit@fallback9:
		SpawnOffset: -724,0,0
		ExitCell: -1,1
	Exit@fallback10:
		SpawnOffset: -724,0,0
		ExitCell: -1,2
	WithSpriteBody:
		PauseOnCondition: chronodisable
	Production:
		Produces: Clone.Soviets
		PauseOnCondition: chronodisable || disabled
	RallyPoint:
		Path: 3,3
		Palette: mouse
		IsPlayerPalette: false
	ClonesProducedUnits:
		CloneableTypes: Infantry
		ProductionType: Clone.Soviets
	AcceptsDeliveredCash:
	IsometricSelectable:
		DecorationHeight: 90
	Voiced:
		VoiceSet: CloningVatsVoice
		Volume: 0.8

napsis:
	Inherits: ^BaseBuilding
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@MC: ^MindControllableBuilding
	Inherits@SHAPE: ^2x2Shape
	Buildable:
		Queue: Support.Unused # Support.Soviets, Support.Baku
		BuildPaletteOrder: 80
		Prerequisites: natech, ~techlevel.4
		Description: Detects enemy units and structures.
	Valued:
		Cost: 1500
	Tooltip:
		Name: Psychic Sensor
	Tooltip@NoRow:
		Name: Psychic Sensor
	Building:
		Footprint: xx xx
		Dimensions: 2,2
	Health:
		HP: 50000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 10c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	RangedGpsProvider:
		Range: 25c0
		RequiresCondition: !build-incomplete && !disabled && !chronodisable
	RenderDetectionCircle:
	WithRangeCircle:
		Range: 25c0
		Type: sensor
	DetectCloaked:
		CloakTypes: Cloak, Underwater
		Range: 25c0
	WithIdleOverlay@spin:
		Sequence: idle-spin
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	Power:
		Amount: -200
		RequiresCondition: !chronodisable
	GrantCondition@IDISABLE:
		RequiresCondition: lowpower || powerdown || emp
	IsometricSelectable:
		DecorationHeight: 120
	Voiced:
		VoiceSet: PsychicSensorVoice
		Volume: 0.8

nairon:
	Inherits: ^SecondarySuperWeapon
	Buildable:
		Queue: Support.Soviets, Support.Baku
		Prerequisites: natech, !enoughiron, ~techlevel.5
		Description: Grants invulnerability to vehicles and structures.\nKills infantry.\n\n  Requires power to operate.
	Tooltip:
		Name: Iron Curtain Device
	Tooltip@NoRow:
		Name: Iron Curtain Device
	WithSpriteBody:
		PauseOnCondition: chronodisable
	GrantExternalConditionPower@IRONCURTAIN:
		Icons:
			1: invuln
		Prerequisites:
			1: nairon
		Cursor: iron-curtain
		ChargeInterval: 6000
		Names:
			1: Invulnerability
		Descriptions:
			1: Makes a group of units invulnerable\nfor 20 seconds.\n\nKills infantry.
		AllowMultiple: true
		Durations:
			1: 500
		Conditions:
			1: invulnerability
		Dimensions:
			1: 3,3
		Footprints:
			1: xxx xxx xxx
		ValidRelationships: Ally, Neutral, Enemy
		SelectTargetSpeechNotification: SelectTarget
		EndChargeSpeechNotification: IronCurtainReady
		LaunchSpeechNotification: IronCurtainActivated
		IncomingSpeechNotification: IronCurtainActivated
		EndChargeSound: siroread.wav
		OnFireSound: siroon.wav
		EffectImage: explosion
		EffectSequence: ironblast
		EffectPalette: effect
		DisplayTimerRelationships: Ally, Neutral, Enemy
		DisplayRadarPing: True
		PauseOnCondition: disabled || chronodisable
	ProvidesPrerequisite@swlimit:
		Prerequisite: enoughiron
	NotificationAnnouncement:
		Notification: IronCurtainDetected
	IsometricSelectable:
		DecorationHeight: 75
	Voiced:
		VoiceSet: IronCurtainDeviceVoice
		Volume: 0.8

namisl:
	Inherits: ^PrimarySuperWeapon
	Buildable:
		Queue: Support.Soviets
		Prerequisites: natech, !enoughnuke, ~techlevel.5
		Description: Provides an atomic bomb.\n\n  Requires power to operate.
	Tooltip:
		Name: Nuclear Missile Silo
	Tooltip@NoRow:
		Name: Nuclear Missile Silo
	NukePower:
		Prerequisites:
			1: namisl
			2: upgrade.advanced_irradiators
		Cursor: nuke
		Icons:
			1: abomb
			2: abomb
		ChargeInterval: 9000
		Names:
			1: Nuclear Missile
			2: Nuclear Missile
		Descriptions:
			1: Launches a devastating nuclear missile\nat a target location.
			2: Launches a devastating nuclear missile\nat a target location.
		AllowMultiple: true
		EndChargeSound: snukread.wav
		LaunchSound: snuklaun.wav
		SelectTargetSpeechNotification: SelectTarget
		EndChargeSpeechNotification: NuclearMissileReady
		LaunchSpeechNotification: NuclearMissileLaunched
		IncomingSpeechNotification: NuclearMissileLaunched
		MissileWeapons:
			1: atomic
			2: atomicOrange
		MissileImage: atomic
		MissilePalette: player
		SpawnOffset: 0,0,-1c0
		IsPlayerPalette: true
		DisplayTimerRelationships: Ally, Neutral, Enemy
		DisplayBeacon: True
		DisplayRadarPing: True
		BeaconPosters:
			1: nukeicon
			2: nukeicon
		ArrowSequence: arrow
		ClockSequence: clock
		CameraRange: 10c0
		CameraRemoveDelay: 200
		PauseOnCondition: disabled || chronodisable
		FlightDelay: 250
		FlightVelocity: 1c0
		TrailInterval: 1
		TrailImage: nukepuff
		TrailSequences: idle
		CircleRanges:
			1: 10c0
			2: 10c0
		CircleColor: FFFFFFFF
		CircleBorderColor: 00000060
	ProvidesPrerequisite@swlimit:
		Prerequisite: enoughnuke
	NotificationAnnouncement:
		Notification: NuclearSiloDetected
	WithSupportPowerActivationOverlay:
		Sequence: smoke
		Palette: effect50alpha
	IsometricSelectable:
		DecorationHeight: 120
	Voiced:
		VoiceSet: NuclearSiloVoice
		Volume: 0.8

nawall:
	Inherits: ^Wall
	Buildable:
		Queue: Support.Soviets, Support.Baku
		Prerequisites: ~techlevel.1
		BuildPaletteOrder: 10
		Description: Heavy wall capable of blocking units and projectiles.
	Tooltip:
		Name: Soviet Wall
	Tooltip@NoRow:
		Name: Soviet Wall
	LineBuild:
		NodeTypes: nawall
	LineBuildNode:
		Types: nawall
	WithWallSpriteBody:
		Type: nawall
	Replaceable:
		Types: SovietGate

naflak:
	Inherits: ^VoxelLighting
	Inherits@AUTOTARGET: ^AutoTargetAir
	Inherits@DRAIN: ^DiskDrainable
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@MC: ^MindControllableBuilding
	Buildable:
		Queue: Support.Soviets, Support.Baku
		BuildPaletteOrder: 60
		Prerequisites: naradr, ~techlevel.2
		Description: Automated anti-aircraft defense.\n\n  Strong vs Aircraft\n  Weak vs Ground units\n\nAbilities:\n- Can detect Steath units\n- Can be placed on water\n\n  Requires power to operate.
		BuildDuration: 375
		BuildDurationModifier: 100
	Valued:
		Cost: 700
	Tooltip:
		Name: Flak Cannon
	Tooltip@NoRow:
		Name: Flak Cannon
	Building:
		Footprint: x
		Dimensions: 1, 1
	Health:
		HP: 60000
	Armor:
		Type: Steel
	RevealsShroud:
		Range: 8c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	Turreted:
		TurnSpeed: 40
		InitialFacing: 896
		Offset: 450,0,0
		RealignDelay: -1
	AttackTurreted:
		PauseOnCondition: build-incomplete || disabled || chronodisable
	Armament:
		Weapon: FlakWeapon
		LocalOffset: 640,0,1536
		MuzzleSequence: muzzle
	WithMuzzleOverlay:
	BodyOrientation:
		QuantizedFacings: 16
	RenderVoxels:
	WithVoxelTurret:
		RequiresCondition: !build-incomplete
	WithRangeCircle:
		Range: 12c0
		Type: aa
	AutoTarget:
	Power:
		Amount: -30
		RequiresCondition: !chronodisable
	GrantCondition@IDISABLE:
		RequiresCondition: lowpower || powerdown || emp || diskdrain
	RequiresBuildableArea:
		Adjacent: 3
	IsometricSelectable:
		Class: naflak
		DecorationHeight: 60
	WithIdleOverlay@waves:
		Sequence: idle-waves
		RequiresCondition: in_water
	DetectCloaked:
		Range: 5c0
		RequiresCondition: !disabled
	RenderDetectionCircle:
	Voiced:
		VoiceSet: FlakCannonVoice
		Volume: 0.8

tesla:
	Inherits: ^SupportBuilding
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@DRAIN: ^DiskDrainable
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@OVERCHARGE: ^AffectedByOvercharge
	Inherits@MC: ^MindControllableBuilding
	Buildable:
		Queue: Support.Soviets, Support.Baku
		BuildPaletteOrder: 70
		Prerequisites: naradr, ~techlevel.3
		Description: Advanced base defense.\nCan be buffed or made work during low power by Tesla Troopers.\n\n  Strong vs Infantry, Vehicles\n  Weak vs Aircraft\n\nAbilities:\n- Can detect Steath units\n- Can be placed on water\n\nUpgradeable with:\n- Overcharge (Russia)\n\n  Requires power to operate.
		BuildDuration: 625
		BuildDurationModifier: 100
	Valued:
		Cost: 1500
	Tooltip:
		Name: Tesla Coil
	Tooltip@NoRow:
		Name: Tesla Coil
	Building:
		Footprint: x
		Dimensions: 1, 1
	Health:
		HP: 60000
	Armor:
		Type: Steel
	RevealsShroud:
		Range: 8c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 8c0
	Targetable@TeslaBoost:
		TargetTypes: TeslaBoost
		RequiresCondition: !powerdown
	WithTeslaChargeOverlay:
	Armament:
		Weapon: CoilBolt
		LocalOffset: 0,0,3072
		RequiresCondition: ((!lowpower && !charged) || (lowpower && charged == 1)) && !overcharge
	Armament@charged:
		Weapon: CoilBoltCharged
		LocalOffset: 0,0,3072
		RequiresCondition: ((!lowpower && !charged) || (lowpower && charged == 1)) && overcharge
	Armament@1:
		Weapon: OPCoilBolt
		LocalOffset: 0,0,3072
		RequiresCondition: ((!lowpower && charged == 1) || (lowpower && charged == 2)) && !overcharge
	Armament@1charged:
		Weapon: OPCoilBoltCharged
		LocalOffset: 0,0,3072
		RequiresCondition: ((!lowpower && charged == 1) || (lowpower && charged == 2)) && overcharge
	Armament@2:
		Weapon: OPerCoilBolt
		LocalOffset: 0,0,3072
		RequiresCondition: ((!lowpower && charged == 2) || (lowpower && charged >= 3)) && !overcharge
	Armament@2charged:
		Weapon: OPerCoilBoltCharged
		LocalOffset: 0,0,3072
		RequiresCondition: ((!lowpower && charged == 2) || (lowpower && charged >= 3)) && overcharge
	Armament@3:
		Weapon: OPestCoilBolt
		LocalOffset: 0,0,3072
		RequiresCondition: !lowpower && charged >= 3 && !overcharge
	Armament@3charged:
		Weapon: OPestCoilBoltCharged
		LocalOffset: 0,0,3072
		RequiresCondition: !lowpower && charged >= 3 && overcharge
	AttackTesla:
		MaxCharges: 3
		ReloadDelay: 80
		ChargeAudio: btespow.wav
		PauseOnCondition: build-incomplete || disabled || chronodisable
	DetectCloaked:
		Range: 7c0
		RequiresCondition: !disabled
	RenderDetectionCircle:
	AutoTarget:
	WithRangeCircle:
		Range: 8c0
		Type: teslacoil
		RequiresCondition: (!lowpower && !charged) || (lowpower && charged == 1)
	WithRangeCircle@1:
		Range: 8c512
		Type: teslacoil
		RequiresCondition: (!lowpower && charged == 1) || (lowpower && charged == 2)
	WithRangeCircle@2:
		Range: 9c0
		Type: teslacoil
		RequiresCondition: (!lowpower && charged == 2) || (lowpower && charged >= 3)
	WithRangeCircle@3:
		Range: 9c512
		Type: teslacoil
		RequiresCondition: !lowpower && charged >= 3
	Power:
		Amount: -75
		RequiresCondition: !chronodisable
	GrantConditionOnPowerState@LOWPOWER:
		RequiresCondition: !charged
	GrantCondition@IDISABLE:
		RequiresCondition: lowpower || powerdown || emp || diskdrain
	WithIdleOverlay@powered:
		Sequence: idle-powered
		PauseOnCondition: chronodisable
		RequiresCondition: !disabled && !build-incomplete
	ExternalCondition@CHARGED:
		Condition: charged
		SourceCap: 1
	IsometricSelectable:
		Class: tesla
		DecorationHeight: 75
	WithIdleOverlay@waves:
		Sequence: idle-waves
		RequiresCondition: in_water
	Voiced:
		VoiceSet: TeslaCoilVoice
		Volume: 0.8

nalasr:
	Inherits: ^SupportBuilding
	Inherits@APBULLETS: ^AffectedByAPBullets
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@MC: ^MindControllableBuilding
	Buildable:
		Queue: Support.Soviets, Support.Baku
		BuildPaletteOrder: 50
		Prerequisites: nahand, ~techlevel.1
		Description: Automated anti-infantry defense.\n\n  Strong vs Infantry\n  Weak vs Vehicles, Aircraft\n\nAbilities:\n- Can detect Steath units\n- Can be placed on water\n\nUpgradeable with:\n- Armor-Piercing Bullets
		BuildDuration: 250
		BuildDurationModifier: 100
	Valued:
		Cost: 500
	Tooltip:
		Name: Sentry Gun
	Tooltip@NoRow:
		Name: Sentry Gun
	Health:
		HP: 40000
	Armor:
		Type: Steel
	RevealsShroud:
		Range: 7c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 7c0
	Turreted:
		TurnSpeed: 40
		InitialFacing: 896
		Offset: 0,0,0
		RealignDelay: -1
	AttackTurreted:
		PauseOnCondition: build-incomplete || chronodisable
	Armament:
		Weapon: vulcan
		LocalOffset: 702,128,768, 702,-128,768
		MuzzleSequence: muzzle
	Armament@line:
		Weapon: vulcanLine
		LocalOffset: 702,128,768, 702,-128,768
		MuzzleSequence: muzzle
		RequiresCondition: apbullets
	WithMuzzleOverlay:
	DetectCloaked:
		Range: 5c0
	RenderDetectionCircle:
	BodyOrientation:
		QuantizedFacings: 16
	WithSpriteTurret:
		RequiresCondition: !build-incomplete
	WithRangeCircle:
		Range: 6c0
		Type: pillbox
	AutoTarget:
	RequiresBuildableArea:
		Adjacent: 4
	IsometricSelectable:
		Class: nalasr
		DecorationHeight: 30
	WithIdleOverlay@waves:
		Sequence: idle-waves
		RequiresCondition: in_water
	Voiced:
		VoiceSet: SentryGunVoice
		Volume: 0.8

# Yuri's Revenge Structures
nabnkr:
	Inherits: ^SupportBuilding
	Inherits@AUTOTARGET: ^AutoTargetAll
	Inherits@MC: ^MindControllableBuilding
	Inherits@SHAPE: ^2x2Shape
	Buildable:
		Queue: Support.Unused # Support.Soviets, Support.Baku
		BuildPaletteOrder: 40
		Prerequisites: nahand, ~techlevel.1
		Description: Static defense with fireports for 6 garrisoned soldiers.\nInfantry inside cannot be killed by garrison killers.\nComes with a Conscript inside.
	Valued:
		Cost: 500
	CustomSellValue:
		Value: 0
	Tooltip:
		Name: Battle Bunker
	Tooltip@NoRow:
		Name: Battle Bunker
	Building:
		Footprint: xx xx
		Dimensions: 2,2
		TerrainTypes: Clear, Rough, Road, DirtRoad
	Health:
		HP: 60000
	Armor:
		Type: Steel
	Cargo:
		Types: Garrisoner
		MaxWeight: 6
		InitialUnits: e2
		AfterLoadDelay: 0
		BeforeUnloadDelay: 0
		AfterUnloadDelay: 0
		EjectOnDeath: true
		LoadedCondition: loaded
	WithCargoSounds:
		EnterSound: ugarris.wav
		ExitSound: ugarris.wav
	-SpawnActorsOnSell@allies:
	-SpawnActorsOnSell@soviets:
	-SpawnActorsOnSell@psicorps:
	WithRangeCircle:
		Range: 6c0
	WithSpriteBody:
	WithIdleOverlay@Garrisoned:
		Sequence: garrisoned
		RequiresCondition: loaded && !build-incomplete
	AttackOpenTopped:
		Armaments: garrisoned, garrisoned-secondary
		PortOffsets: 768,0,1024, 448,-682,1024, -448,-682,1024, -768,0,1024, -448,682,1024, 448,682,1024
		PauseOnCondition: build-incomplete || chronodisable
	RevealsShroud:
		Range: 6c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	WithCargoPipsDecoration:
		EmptySequence: pip-garrison-empty
		FullSequence: pip-garrison-green
		Margin: 4, 3
		PipStride: 4, 2
		Palette: ra
		Position: BottomLeft
		RequiresSelection: true
		CustomPipSequences:
			gray: pip-garrison-gray
			yellow: pip-garrison-yellow
			blue: pip-garrison-blue
			red: pip-garrison-red
	EngineerRepairable:
		RequiresCondition: !ivanbomb && !sealC4 && !commandoC4 && !teslabomb && !toxinbomb && damaged
	GrantConditionOnDamageState@DAMAGED:
		Condition: damaged
		ValidDamageStates: Light, Medium, Heavy, Critical
	IsometricSelectable:
		DecorationHeight: 45
	Voiced:
		VoiceSet: BattleBunkerVoice
		Volume: 0.8

naindp:
	Inherits: ^BaseBuilding
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@MC: ^MindControllableBuilding
	Inherits@SHAPE: ^3x3Shape
	Buildable:
		Queue: Building.Soviets, Building.Baku
		BuildPaletteOrder: 120
		Prerequisites: narefn, natech, ~techlevel.4
		Description: Decreases vehicle costs by 25%.\n\n  Maximum 1 can be built.
		BuildLimit: 1
		BuildDuration: 1250
		BuildDurationModifier: 100
	Valued:
		Cost: 2000
	Tooltip:
		Name: Industrial Plant
	Tooltip@NoRow:
		Name: Industrial Plant
	ProvidesPrerequisite@default:
		RequiresCondition: !disabled && !chronodisable
	Building:
		Footprint: xxx xxx xxx
		Dimensions: 3,3
	WithIdleOverlay@pistons:
		Sequence: idle-pistons
		PauseOnCondition: chronodisable || disabled
		RequiresCondition: !build-incomplete
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable || disabled
		RequiresCondition: !build-incomplete
	GrantExternalConditionToOwner:
		Condition: naindp
		RequiresCondition: !disabled && !chronodisable
	Health:
		HP: 75000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 6c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	Power:
		Amount: -200
		RequiresCondition: !chronodisable
	IsometricSelectable:
		DecorationHeight: 120
	Voiced:
		VoiceSet: IndustrialPlantVoice
		Volume: 0.8

# Custom Structures
nagatea:
	Inherits: ^Gate_A
	Buildable:
		Queue: Support.Soviets, Support.Baku
		Prerequisites: ~techlevel.1
		BuildPaletteOrder: 20
		BuildDuration: 125
		BuildDurationModifier: 100
	Tooltip:
		Name: Soviet Gate
	Tooltip@NoRow:
		Name: Soviet Gate
	LineBuildNode:
		Types: nawall
	WithGateSpriteBody:
		Type: nawall
	Replacement:
		ReplaceableTypes: SovietGate
	PlaceBuildingVariants:
		Actors: nagateb

nagateb:
	Inherits: ^Gate_B
	-Buildable:
	Tooltip:
		Name: Soviet Gate
	Tooltip@NoRow:
		Name: Soviet Gate
	LineBuildNode:
		Types: nawall
	WithGateSpriteBody:
		Type: nawall
	Replacement:
		ReplaceableTypes: SovietGate

napost:
	Inherits: ^BaseBuilding
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@DRAIN: ^DiskDrainable
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@OVERCHARGE: ^AffectedByOvercharge
	Buildable:
		Queue: Support.Soviets, Support.Baku
		BuildPaletteOrder: 40
		Prerequisites: power, ~prerequisite.tesla_fence, ~techlevel.1
		Description: Defence system that creates an electric fence between 2 fence posts.\nPosts also act as small Tesla Coils.\nCan be buffed or made work during low power by Tesla Troopers.\n\nUpgradeable with:\n- Overcharge (Russia)\n\n  Requires power to operate.
		BuildDuration: 125
		BuildDurationModifier: 100
	Valued:
		Cost: 200
	Tooltip:
		Name: Tesla Fence Post
	Tooltip@NoRow:
		Name: Tesla Fence Post
	Health:
		HP: 50000
	Armor:
		Type: Concrete
	LineBuild:
		Range: 10
		NodeTypes: teslafencenode
		SegmentType: nafnce
		SegmentsRequireNode: true
	LineBuildNode:
		Types: teslafencenode
	Targetable@TeslaBoost:
		TargetTypes: TeslaBoost
		RequiresCondition: !powerdown
	WithTeslaChargeOverlay:
	Armament:
		Weapon: PostBolt
		LocalOffset: 0,0,30
		RequiresCondition: ((!lowpower && !charged) || (lowpower && charged == 1)) && !overcharge
	Armament@charged:
		Weapon: PostBoltCharged
		LocalOffset: 0,0,30
		RequiresCondition: ((!lowpower && !charged) || (lowpower && charged == 1)) && overcharge
	Armament@1:
		Weapon: OPPostBolt
		LocalOffset: 0,0,30
		RequiresCondition: ((!lowpower && charged == 1) || (lowpower && charged == 2)) && !overcharge
	Armament@1charged:
		Weapon: OPPostBoltCharged
		LocalOffset: 0,0,30
		RequiresCondition: ((!lowpower && charged == 1) || (lowpower && charged == 2)) && overcharge
	Armament@2:
		Weapon: OPerPostBolt
		LocalOffset: 0,0,30
		RequiresCondition: ((!lowpower && charged == 2) || (lowpower && charged >= 3)) && !overcharge
	Armament@2charged:
		Weapon: OPerPostBoltCharged
		LocalOffset: 0,0,30
		RequiresCondition: ((!lowpower && charged == 2) || (lowpower && charged >= 3)) && overcharge
	Armament@3:
		Weapon: OPestPostBolt
		LocalOffset: 0,0,30
		RequiresCondition: !lowpower && charged >= 3 && !overcharge
	Armament@3charged:
		Weapon: OPestPostBoltCharged
		LocalOffset: 0,0,30
		RequiresCondition: !lowpower && charged >= 3 && overcharge
	AttackTesla:
		MaxCharges: 1
		ReloadDelay: 80
		ChargeAudio: btespow.wav
		PauseOnCondition: build-incomplete || disabled || chronodisable
	Power:
		Amount: -10
		RequiresCondition: !chronodisable
	GrantConditionOnPowerState@LOWPOWER:
		RequiresCondition: !charged
	GrantCondition@IDISABLE:
		RequiresCondition: lowpower || powerdown || emp || diskdrain
	RevealsShroud:
		Range: 4c0
	WithIdleOverlay@LIGHTS:
		Sequence: lights
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	WithIdleOverlay@CHAINOFLIGHTS:
		Sequence: chainoflights
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	LineBuildSegmentExternalCondition:
		RequiresCondition: !build-incomplete && !disabled
		Condition: active-posts
	RequiresBuildableArea:
		Adjacent: 6
	IsometricSelectable:
		DecorationHeight: 30
	WithRangeCircle:
		Range: 3c0
		Type: teslacoil
		RequiresCondition: (!lowpower && !charged) || (lowpower && charged == 1)
	WithRangeCircle@1:
		Range: 3c512
		Type: teslacoil
		RequiresCondition: (!lowpower && charged == 1) || (lowpower && charged == 2)
	WithRangeCircle@2:
		Range: 4c0
		Type: teslacoil
		RequiresCondition: (!lowpower && charged == 2) || (lowpower && charged >= 3)
	WithRangeCircle@3:
		Range: 4c512
		Type: teslacoil
		RequiresCondition: !lowpower && charged >= 3
	ExternalCondition@CHARGED:
		Condition: charged
		SourceCap: 1
	Voiced:
		VoiceSet: TeslaCoilVoice
		Volume: 0.8

nafnce:
	Inherits: ^Wall
	Tooltip:
		Name: Tesla Fence
	Tooltip@NoRow:
		Name: Tesla Fence
	LineBuild:
		NodeTypes: teslafence
	LineBuildNode:
		Types: teslafence
	-Crushable:
	-Sellable:
	-Targetable:
	-Building:
	Explodes:
		Weapon: UnitExplodeSmall
		EmptyWeapon: UnitExplodeSmall
	EnergyWall:
		ActiveCondition: active-posts == 2
		Weapon: TeslaFence
	GrantConditionOnLineBuildDirection@X:
		Direction: X
		Condition: teslafence-direction-x
	GrantConditionOnLineBuildDirection@Y:
		Direction: Y
		Condition: teslafence-direction-y
	-WithWallSpriteBody:
	ExternalCondition@ACTIVE:
		Condition: active-posts
	WithWallSpriteBody@XENABLED:
		RequiresCondition: teslafence-direction-x && active-posts == 2
		Type: teslafence
		Sequence: enabled-x
		Name: x-enabled
	WithWallSpriteBody@YENABLED:
		RequiresCondition: teslafence-direction-y && active-posts == 2
		Type: teslafence
		Sequence: enabled-y
		Name: y-enabled
	WithSpriteBody@XDISABLED:
		RequiresCondition: teslafence-direction-x && active-posts < 2
		Sequence: disabled-x
		Name: x-disabled
	WithSpriteBody@YDISABLED:
		RequiresCondition: teslafence-direction-y && active-posts < 2
		Sequence: disabled-y
		Name: y-disabled
	BlocksProjectiles:
		RequiresCondition: active-posts == 2
	DamageMultiplier: # Prevent all normal damage, but still allows direct kills from the post
		Modifier: 0
	Interactable:
		Bounds: 1158, 1158

nasilo:
	Inherits: ^Silo
	Buildable:
		Queue: Support.Soviets, Support.Baku
	GrantConditionOnFaction@Soviets:
		Condition: soviets
		Factions: russia, iraq, vietnam, cuba, libya, chile, mexico, mongolia
	GrantConditionOnFaction@Baku:
		Condition: baku
		Factions: transcaucus, turkmen, tuva, russianfed, serbia
	WithIdleOverlay@Soviets:
		Sequence: idle-hns
		RequiresCondition: !build-incomplete && soviets
	WithIdleOverlay@Baku:
		Sequence: idle-star
		RequiresCondition: !build-incomplete && baku
	IsometricSelectable:
		DecorationHeight: 45

naprop:
	Inherits: ^SupportBuilding
	Inherits@DRAIN: ^DiskDrainable
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@MC: ^MindControllableBuilding
	Buildable:
		Queue: Support.Soviets, Support.Baku
		BuildPaletteOrder: 80
		Prerequisites: natech, ~techlevel.4
		Description: Buffs fire speed of nearby units and heals them.\n\n  Requires power to operate.
		BuildDuration: 125
		BuildDurationModifier: 100
	Building:
		TerrainTypes: Clear, Rough, Road, DirtRoad
	Valued:
		Cost: 500
	Tooltip:
		Name: Propaganda Tower
	Tooltip@NoRow:
		Name: Propaganda Tower
	Building:
		Footprint: x
		Dimensions: 1, 1
	Health:
		HP: 60000
	Armor:
		Type: Steel
	RevealsShroud:
		Range: 8c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 7c0
	ProximityExternalCondition@propaganda_tower:
		Condition: propaganda_tower
		Range: 8c0
		RequiresCondition: !disabled && !chronodisable
	WithRangeCircle:
		Range: 8c0
		Type: propaganda
	Capturable:
		Types: building
		RequiresCondition: !build-incomplete && !invulnerability && !forceshield
	CaptureNotification:
	Targetable:
		TargetTypes: Ground, C4, DetonateAttack, Structure, NonGarrisonableStructure
	Power:
		Amount: -25
		RequiresCondition: !chronodisable
	GrantCondition@IDISABLE:
		RequiresCondition: lowpower || powerdown || emp || diskdrain
	RangedGpsDot:
		Sequence: Structure
	IsometricSelectable:
		DecorationHeight: 75

naexpn:
	Inherits: ^ExpansionNode
	# Transforms:
	#	IntoActor: exps
	RenderSprites:
		Image: gaexpn
	Voiced:
		VoiceSet: SovietExpansionNodeVoice

napowb:
	Inherits: napowr
	Inherits@SHAPE: ^2x3Shape
	-Buildable:
	-PlaceBuildingVariants:
	Building:
		Footprint: xx xx xx
		Dimensions: 2,3

narefb:
	Inherits: ^RefineryB
	FreeActor:
		Actor: harv
	ProvidesPrerequisite@narefn:
		Prerequisite: narefn
	SmokeParticleEmitter@refinerysmoke1:
		Offset: 1024,-384,4096
	SmokeParticleEmitter@refinerysmoke2:
		Offset: -128,-1408,4096
	IsometricSelectable:
		DecorationHeight: 90

narefc:
	Inherits: ^RefineryC
	FreeActor:
		Actor: harv
	ProvidesPrerequisite@narefn:
		Prerequisite: narefn
	SmokeParticleEmitter@refinerysmoke1:
		Offset: 1024,384,4096
	SmokeParticleEmitter@refinerysmoke2:
		Offset: -128,1408,4096
	IsometricSelectable:
		DecorationHeight: 90

narefd:
	Inherits: ^RefineryD
	FreeActor:
		Actor: harv
	ProvidesPrerequisite@narefn:
		Prerequisite: narefn
	SmokeParticleEmitter@refinerysmoke1:
		Offset: -1024,384,4096
	SmokeParticleEmitter@refinerysmoke2:
		Offset: 128,1408,4096
	IsometricSelectable:
		DecorationHeight: 90

naweab:
	Inherits: naweap
	Inherits@SHAPE: ^FlippedFactoryXShape
	-Buildable:
	-PlaceBuildingVariants:
	Building:
		Footprint: xxx xxx xxx xxx +++
		Dimensions: 3,5
	RallyPoint:
		Path: 1,6
	Exit@1:
		ExitCell: 1,4

naweac:
	Inherits: naweap
	Inherits@SHAPE: ^FlippedFactoryShape
	-Buildable:
	-PlaceBuildingVariants:
	-WithExitOverlay@front:
	-WithExitOverlay@top:
	-WithIdleOverlay@bib:
	WithIdleOverlay@lights:
		Sequence: idle-flag
	Building:
		Footprint: +xxxx +xxxx +xxxx
	RallyPoint:
		Path: -2,1
	Exit@1:
		ExitCell: 0,1

nawead:
	Inherits: naweab
	Inherits@SHAPE: ^FlippedFactoryYShape
	-WithExitOverlay@front:
	-WithExitOverlay@top:
	-WithIdleOverlay@bib:
	WithIdleOverlay@lights:
		Sequence: idle-flag
	Building:
		Footprint: +++ xxx xxx xxx xxx
	RallyPoint:
		Path: 1,-2
	Exit@1:
		ExitCell: 1,0

nadepb:
	Inherits: nadept
	Inherits@SHAPE: ^3x4Shape
	HitShape:
		TargetableOffsets: 0,0,0, 360,360,0, -360,-360,0, -1080,-1080,0, -360,-1800,0, -1800,-360,0, 360,-1080,0, -360,1080,0, -1080,360,0, 1080,-360,0
	-Buildable:
	-PlaceBuildingVariants:
	Building:
		Footprint: xxx +++ +++ +++
		Dimensions: 3,4
	RallyPoint:
		Path: 1,4

nacnst:
	Inherits: ^ConstructionYard
	ProvidesPrerequisite@soviets:
		Prerequisite: structures.soviets
	Production:
		Produces: Building.Soviets, Support.Soviets
	ProductionQueue@Building:
		Type: Building.Soviets
	ProductionQueue@Support:
		Type: Support.Soviets
	ProductionBar@Building:
		ProductionType: Building.Soviets
	ProductionBar@Support:
		ProductionType: Support.Soviets
	Transforms:
		IntoActor: smcv
	WithIdleOverlay@top:
		Sequence: idle-top
		RequiresCondition: !build-incomplete
	WithIdleOverlay@normal:
		Sequence: idle-normal
		RequiresCondition: !build-incomplete
	WithBuildingPlacedAnimation:
		RequiresCondition: !build-incomplete
	GrantConditionOnFaction@Russia:
		Condition: russia
		Factions: russia
	GrantConditionOnFaction@Iraq:
		Condition: iraq
		Factions: iraq
	GrantConditionOnFaction@Vietnam:
		Condition: vietnam
		Factions: vietnam
	GrantConditionOnFaction@Cuba:
		Condition: cuba
		Factions: cuba
	GrantConditionOnFaction@libya:
		Condition: libya
		Factions: libya
	WithIdleOverlay@Russia:
		Sequence: flag-russia
		RequiresCondition: !build-incomplete && russia
	WithIdleOverlay@Iraq:
		Sequence: flag-iraq
		RequiresCondition: !build-incomplete && iraq
	WithIdleOverlay@Vietnam:
		Sequence: flag-vietnam
		RequiresCondition: !build-incomplete && vietnam
	WithIdleOverlay@Cuba:
		Sequence: flag-cuba
		RequiresCondition: !build-incomplete && cuba
	WithIdleOverlay@Libya:
		Sequence: flag-libya
		RequiresCondition: !build-incomplete && libya

napowr:
	Inherits: ^BaseBuilding
	Inherits@MC: ^MindControllableBuilding
	Inherits@POWEROUTAGE: ^DisabledByPowerOutage
	Inherits@shape: ^3x2Shape
	Buildable:
		Queue: Building.Soviets
		Prerequisites: ~techlevel.1
		BuildPaletteOrder: 10
		Description: Provides power for other structures.\nCan be rotated.
	Valued:
		Cost: 500
	Tooltip:
		Name: Tesla Reactor
	ProvidesPrerequisite:
		Prerequisite: power
	Building:
		Footprint: xxx xxx
		Dimensions: 3,2
	Selectable:
		Bounds: 126, 94, 2, -16
	Health:
		HP: 500
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 6c0
	RevealsShroudToIntelligenceOwner:
		Types: SatelliteScan
		Range: 6c0
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	Power:
		Amount: 150
		RequiresCondition: !chronodisable && !forceshieldnopower && !power-outage
	GrantConditionOnPrerequisite@forceshield:
		Condition: forceshieldnopower
		Prerequisites: forceshield
	ScalePowerWithHealth:
	SoundOnDamageTransition:
		DestroyedSounds: bpowdiea.wav, bpowdieb.wav
	PowerTooltip:
	Targetable:
		TargetTypes: Ground, C4, DetonateAttack, Structure, NonGarrisonableStructure, SpyInfiltrate
	PlaceBuildingVariants:
		Actors: napowb

nahand:
	Inherits: ^Barracks
	Inherits@shape: ^2x2Shape
	Buildable:
		Queue: Building.Soviets
		Description: Trains infantry.
	Building:
		Footprint: xx xx
		Dimensions: 2,2
	Selectable:
		Bounds: 94, 168, 0, -58
	Exit@n1_0:
		SpawnOffset: 0,0,0
		ExitCell: -1, 0
	Exit@0_n1:
		SpawnOffset: 280,-280,0
		ExitCell: 0, -1
	Exit@n1_n1:
		SpawnOffset: 0,0,0
		ExitCell: -1, -1
	Exit@1_n1:
		SpawnOffset: 0,0,0
		ExitCell: 1, -1
	Exit@n1_1:
		SpawnOffset: -410,-140,0
		ExitCell: -1, 1
	Exit@2_0:
		SpawnOffset: 410,140,0
		ExitCell: 2, 0
	Exit@2_n1:
		SpawnOffset: 0,0,0
		ExitCell: 2, -1
	Exit@2_1:
		SpawnOffset: 0,0,0
		ExitCell: 2, 1
	Exit@0_2:
		SpawnOffset: 0,0,0
		ExitCell: 0, 2
	Exit@n1_2:
		SpawnOffset: 0,0,0
		ExitCell: -1, 2
	Exit@1_2:
		SpawnOffset: -280,280,0
		ExitCell: 1, 2
	Exit@2_2:
		SpawnOffset: 0,0,0
		ExitCell: 2, 2
	Production:
		Produces: Infantry.Soviets, Infantry.Cuba, Infantry.Iraq
	ProductionQueue:
		Type: Infantry.Soviets
		Factions: america, germany, england, france, korea, libya, russia, vietnam, psicorps
	ProductionQueue@Cuba:
		Type: Infantry.Cuba
		Factions: cuba
		Group: Infantry
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Iraq:
		Type: Infantry.Iraq
		Factions: iraq
		Group: Infantry
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionBar:
		ProductionType: Infantry.Soviets
	ProductionBar@Cuba:
		ProductionType: Infantry.Cuba
	ProductionBar@Iraq:
		ProductionType: Infantry.Iraq
	RallyPoint:
		Offset: 3,3

narefn:
	Inherits: ^Refinery
	Buildable:
		Queue: Building.Soviets
	Selectable:
		Bounds: 170, 150, -6, -33
	FreeActor:
		Actor: harv
	PlaceBuildingVariants:
		Actors: narefb, narefc, narefd

naradr:
	Inherits: ^BaseBuilding
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@MC: ^MindControllableBuilding
	Inherits@shape: ^2x2Shape
	Buildable:
		Queue: Building.Soviets
		BuildPaletteOrder: 60
		Prerequisites: power, narefn, ~techlevel.2
		Description: Provides radar
	Valued:
		Cost: 1500
	Tooltip:
		Name: Radar Tower
	ProvidesPrerequisite:
		Prerequisite: radar
	ProvidesPrerequisite@default:
	ProvidesPrerequisite@russia:
		Prerequisite: radar.russia
		Factions: russia
	ProvidesPrerequisite@iraq:
		Prerequisite: radar.iraq
		Factions: iraq
	ProvidesPrerequisite@vietnam:
		Prerequisite: radar.vietnam
		Factions: vietnam
	ProvidesPrerequisite@cuba:
		Prerequisite: radar.cuba
		Factions: cuba
	ProvidesPrerequisite@libya:
		Prerequisite: radar.libya
		Factions: libya
	Building:
		Footprint: xx xx
		Dimensions: 2,2
	Selectable:
		Bounds: 95, 130, 0, -40
	Health:
		HP: 1000
	Armor:
		Type: Wood
	ProvidesRadar:
		RequiresCondition: !disabled && !chronodisable
	RevealsShroud:
		Range: 10c0
	RevealsShroudToIntelligenceOwner:
		Types: SatelliteScan
		Range: 10c0
	SupportPowerChargeBar:
	ParatroopersPower@tesladrop:
		OrderName: RussianTeslaDrop
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.russia
		Icons:
			1: tesladrop
		ChargeInterval: 6000
		Descriptions:
			1: Tesla Drop
		LongDescs:
			1: A Cargo Plane drops a Tesla Tank\n and 3 Tesla Troopers anywhere on the map.
		SelectTargetSpeechNotification: SelectTarget
		EndChargeSpeechNotification: ParatroopersReady
		DropItems:
			1: shk, shk, shk, ttnk
		SquadSizes:
			1: 1
		QuantizedFacings: 8
		UnitTypes:
			1: pdplane
		CameraActor: camera
		DisplayBeacon: True
		BeaconPosters:
			1: tesdicon
		ArrowSequence: arrow
		ClockSequence: clock
		UseDirectionalTarget: True
		DirectionArrowAnimation: swdirection
		DirectionArrowPalette: mouse
	NukePower@radiationmissile:
		OrderName: IraqiRadMissile
		Cursor: nuke
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.iraq
		Icons:
			1: radmissile
		ChargeInterval: 7500
		Descriptions:
			1: Radiation Missile
		LongDescs:
			1: Fires a missile that deals low damage\nand leaves radiation.
		LaunchSound: sradlaun.wav
		SelectTargetSpeechNotification: SelectTarget
		MissileWeapon: RadiationMissile
		MissilePalette: player
		IsPlayerPalette: true
		CameraRange: 8c0
		CameraRemoveDelay: 75
		FlightVelocity: 0c768
		FlightDelay: 140
		DisplayBeacon: True
		BeaconPosters:
			1: radmicon
		ArrowSequence: arrow
		ClockSequence: clock
		TargetCircleRanges:
			1: 4c0
	DetonateWeaponPower@instanbunker:
		OrderName: VietnameseInstantBunker
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.vietnam
		Icons:
			1: bunker
		ChargeInterval: 4500
		Descriptions:
			1: Instant Bunker
		LongDescs:
			1: Places a bunker anywhere on the map.
		SelectTargetSpeechNotification: SelectTarget
		Weapons:
			1: BunkerSpawner
		ActivationSequence:
	DetonateWeaponPower@ambush:
		OrderName: LibyanAmbush
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.libya
		Icons:
			1: ambush
		ChargeInterval: 4500
		Descriptions:
			1: Ambush
		LongDescs:
			1: Spawns 9 Conscripts and 6 Flak Troopers\nanywhere on the map.
		SelectTargetSpeechNotification: SelectTarget
		Weapons:
			1: AmbushSpawner
		ActivationSequence:
	AirstrikePower@clustermines:
		OrderName: CubanClusterMines
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.cuba
		Icons:
			1: cluster
		ChargeInterval: 4500
		Descriptions:
			1: Cluster Mines
		LongDescs:
			1: A Cargo plane drops 13 mines\nanywhere on the map.
		SelectTargetSpeechNotification: SelectTarget
		UnitTypes:
			1: pdplane.cluster_mines
		SquadSizes:
			1: 1
		QuantizedFacings: 8
		CameraActor: camera.mines
		DisplayBeacon: True
		BeaconPosters:
			1: mineicon
		ArrowSequence: arrow
		ClockSequence: clock
		UseDirectionalTarget: True
		DirectionArrowAnimation: swdirection
		DirectionArrowPalette: mouse
	WithIdleOverlay@dish:
		Sequence: idle-dish
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	Targetable:
		TargetTypes: Ground, C4, DetonateAttack, Structure, NonGarrisonableStructure, SpyInfiltrate
	InfiltrateForExploration:
		Types: SpyInfiltrate
	Power:
		Amount: -75

mine:
	Inherits@1: ^SpriteActor
	Interactable:
		Bounds: 24,24
	WithSpriteBody:
	HiddenUnderFog:
	RevealsShroud:
		Range: 1c0
	RevealsShroudToIntelligenceOwner:
		Types: SatelliteScan
		Range: 1c0
	Mine:
		CrushClasses: mine
		DetonateClasses: mine
		BlockFriendly: false
	Health:
		HP: 50
		NotifyAppliedDamage: false
	Armor:
		Type: Light
	Cloak:
		CloakSound:
		UncloakSound:
		Palette:
		InitialDelay: 0
	Tooltip:
		Name: Mine
	Targetable:
		TargetTypes: Ground, Structure, Defense, NonGarrisonableStructure
	Mobile:
		Speed: 1
		Locomotor: wheeled
	RejectsOrders:
	HitShape:
	MapEditorData:
		Categories: System
	Explodes:
		Weapon: MineExplosion
	RenderSprites:
		PlayerPalette: infantry

naweap:
	Inherits: ^WarFactory
	Buildable:
		Queue: Building.Soviets
	ProvidesPrerequisite@naweap:
		Prerequisite: naweap
	Production:
		Produces: Vehicle.Soviets, Vehicle.USSR, Vehicle.Libya, Vehicle.Vietnam
	ProductionQueue:
		Type: Vehicle.Soviets
		Factions: america, germany, england, france, korea, cuba, iraq, psicorps
	ProductionQueue@USSR:
		Type: Vehicle.USSR
		Factions: russia
		Group: Vehicle
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Libya:
		Type: Vehicle.Libya
		Factions: libya
		Group: Vehicle
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Vietnam:
		Type: Vehicle.Vietnam
		Factions: vietnam
		Group: Vehicle
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionBar:
		ProductionType: Vehicle.Soviets
	ProductionBar@USSR:
		ProductionType: Vehicle.USSR
	ProductionBar@Libya:
		ProductionType: Vehicle.Libya
	ProductionBar@Vietnam:
		ProductionType: Vehicle.Vietnam
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	PlaceBuildingVariants:
		Actors: naweab

nayard:
	Inherits: ^Shipyard
	Buildable:
		Queue: Building.Soviets
	Production:
		Produces: Ship.Soviets
	ProductionQueue:
		Type: Ship.Soviets
	ProductionBar:
		ProductionType: Ship.Soviets

nmine:
	Inherits: mine
	Mine:
		CrushClasses: nmine
		DetonateClasses: nmine
	Tooltip:
		Name: Naval Mine
	RevealsShroud:
		Range: 3c0
	RevealsShroudToIntelligenceOwner:
		Range: 3c0
	Targetable:
		TargetTypes: Ground, Water, Underwater, Structure, Defense, NonGarrisonableStructure
	-Mobile:
	Building:
		Footprint: x
		Dimensions: 1,1
		TerrainTypes: Water
	Cloak:
		CloakTypes: Cloak, Underwater
	Explodes:
		Weapon: MineExplosion
	RenderSprites:
		PlayerPalette: player

nadept:
	Inherits: ^ServiceDepot
	Inherits@shape: ^4x3Shape
	Buildable:
		Queue: Building.Soviets
		Prerequisites: naweap, ~techlevel.1
		Description: Repairs vehicles and removes Terror Drones for a price.\nCan be rotated.
	Selectable:
		Bounds: 156, 150, 0, -38
	ProvidesPrerequisite@default:
		Prerequisite: nadept
	Building:
		Footprint: x=== x=x= x===
		Dimensions: 4,3
	RallyPoint:
		Offset: 4,1
	WithSpriteBody:
		PauseOnCondition: chronodisable
	WithIdleOverlay@normal:
		Sequence: idle-normal
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	PlaceBuildingVariants:
		Actors: nadepb

naheli:
	Inherits: ^BaseBuilding
	Inherits@MC: ^MindControllableBuilding
	Inherits@shape: ^3x3Shape
	Buildable:
		Queue: Building.Soviets
		BuildPaletteOrder: 100
		Prerequisites: refinery, ~techlevel.2
		Description: Produces Soviet aircraft.
	Valued:
		Cost: 1000
	Tooltip:
		Name: Helipad
	ProvidesPrerequisite@default:
	Building:
		Footprint: xxx xxx xxx
		Dimensions: 3,3
	Health:
		HP: 750
	RevealsShroud:
		Range: 6c0
	RevealsShroudToIntelligenceOwner:
		Types: SatelliteScan
		Range: 6c0
	Armor:
		Type: Wood
	Reservable:
	RallyPoint:
		Offset: 3,1
		Palette: mouse
		IsPlayerPalette: false
	Exit@1:
		Facing: 160
		ExitCell: 1,1
		SpawnOffset: -384,128,0
		MoveIntoWorld: true
	GrantExternalConditionToProduced:
		Condition: produced
	Production:
		Produces: Aircraft.Soviets
		PauseOnCondition: chronodisable
	ProductionQueue:
		Type: Aircraft.Soviets
		Group: Aircraft
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionBar:
		ProductionType: Aircraft.Soviets
	Power:
		Amount: -35
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	WithIdleOverlay@dish:
		Sequence: idle-dish
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete

nanrct:
	Inherits: ^BaseBuilding
	Inherits@MC: ^MindControllableBuilding
	Inherits@POWEROUTAGE: ^DisabledByPowerOutage
	Inherits@shape: ^4x4Shape
	Buildable:
		Queue: Building.Soviets
		BuildPaletteOrder: 110
		Prerequisites: natech, ~techlevel.3
		Description: Provides power for other structures.
	Valued:
		Cost: 1500
	Tooltip:
		Name: Nuclear Reactor
	ProvidesPrerequisite:
		Prerequisite: power
	Building:
		Footprint: xxxx xxxx xxxx _xx_
		Dimensions: 4,4
	Selectable:
		Bounds: 167, 130, 9, -31
	Health:
		HP: 1000
	Armor:
		Type: Concrete
	RevealsShroud:
		Range: 6c0
	RevealsShroudToIntelligenceOwner:
		Types: SatelliteScan
		Range: 6c0
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	Explodes:
		Type: CenterPosition
		Weapon: NukePayload
		EmptyWeapon: NukePayload
	Power:
		Amount: 1000
		RequiresCondition: !chronodisable && !forceshieldnopower && !power-outage
	GrantConditionOnPrerequisite@forceshield:
		Condition: forceshieldnopower
		Prerequisites: forceshield
	ScalePowerWithHealth:
	SoundOnDamageTransition:
		DestroyedSounds: bpowdiea.wav, bpowdieb.wav
	PowerTooltip:
	Targetable:
		TargetTypes: Ground, C4, DetonateAttack, Structure, NonGarrisonableStructure, SpyInfiltrate

natech:
	Inherits: ^BaseBuilding
	Inherits@MC: ^MindControllableBuilding
	Inherits@shape: ^3x3Shape
	Buildable:
		Queue: Building.Soviets
		BuildPaletteOrder: 90
		Prerequisites: naradr, ~techlevel.3
		Description: Allows deployment of advanced units.
	Valued:
		Cost: 2000
	Tooltip:
		Name: Battle Lab
	ProvidesPrerequisite@default:
	Building:
		Footprint: xxx xxx xxx
		Dimensions: 3,3
	Selectable:
		Bounds: 152, 164, 0, -50
	Health:
		HP: 500
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 6c0
	RevealsShroudToIntelligenceOwner:
		Types: SatelliteScan
		Range: 6c0
	Power:
		Amount: -100
	InfiltrateForSupportPower:
		Types: SpyInfiltrate
		Proxy: soviets.tech.infiltrated
	Targetable:
		TargetTypes: Ground, C4, DetonateAttack, Structure, NonGarrisonableStructure, SpyInfiltrate

naclon:
	Inherits: ^BaseBuilding
	Inherits@MC: ^MindControllableBuilding
	Inherits@shape: ^2x2Shape
	Buildable:
		Queue: Building.Soviets
		BuildPaletteOrder: 120
		Prerequisites: ~disabled # natech
		Description: Clones most trained infantry.\nMaximum 1 can be built.
		BuildLimit: 1
	Valued:
		Cost: 2500
	Tooltip:
		Name: Cloning Vats
	Building:
		Footprint: xx xx
		Dimensions: 2, 2
	Selectable:
		Bounds: 108, 134, 0, -48
	Health:
		HP: 1000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 6c0
	RevealsShroudToIntelligenceOwner:
		Types: SatelliteScan
		Range: 6c0
	Power:
		Amount: -200
	-Capturable:
	-CaptureNotification:
	-CapturableProgressBar:
	-CapturableProgressBlink:
	-GrantConditionOnPrerequisite@INSTANTCAPTURE:
	Exit@n1_0:
		SpawnOffset: 0,0,0
		ExitCell: -1, 0
	Exit@0_n1:
		SpawnOffset: 0,0,0
		ExitCell: 0, -1
	Exit@n1_n1:
		SpawnOffset: 280,-280,0
		ExitCell: -1, -1
	Exit@1_n1:
		SpawnOffset: 0,0,0
		ExitCell: 1, -1
	Exit@n1_1:
		SpawnOffset: -410,-140,0
		ExitCell: -1, 1
	Exit@2_0:
		SpawnOffset: 410,140,0
		ExitCell: 2, 0
	Exit@2_n1:
		SpawnOffset: 0,0,0
		ExitCell: 2, -1
	Exit@2_1:
		SpawnOffset: 0,0,0
		ExitCell: 2, 1
	Exit@0_2:
		SpawnOffset: -280,280,0
		ExitCell: 0, 2
	Exit@n1_2:
		SpawnOffset: 0,0,0
		ExitCell: -1, 2
	Exit@1_2:
		SpawnOffset: 0,0,0
		ExitCell: 1, 2
	Exit@2_2:
		SpawnOffset: 0,0,0
		ExitCell: 2, 2
	WithSpriteBody:
		PauseOnCondition: chronodisable
	Production:
		Produces: Infantry.Allies, Infantry.USA, Infantry.UK, Infantry.Soviets, Infantry.Iraq, Infantry.Vietnam, Infantry.Cuba, Infantry.Yuri
	RallyPoint:
		Offset: 3,3
		Palette: mouse
		IsPlayerPalette: false
	ClonesProducedUnits:
		CloneableTypes: Infantry
	AcceptsDeliveredCash:

napsis:
	Inherits: ^BaseBuilding
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@MC: ^MindControllableBuilding
	Inherits@shape: ^2x2Shape
	Buildable:
		Queue: Support.Soviets
		BuildPaletteOrder: 80
		Prerequisites: natech, ~techlevel.4
		Description: Detects enemy units and strikepoints
	Valued:
		Cost: 1000
	Tooltip:
		Name: Psychic Sensor
	Building:
		Footprint: xx xx
		Dimensions: 2,2
	Selectable:
		Bounds: 82, 150, -1, -55
	Health:
		HP: 500
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 15c0
		RequiresCondition: !disabled
	RevealsShroudToIntelligenceOwner:
		Types: SatelliteScan
		Range: 15c0
		RequiresCondition: !disabled
	RevealsShroud@DISABLED:
		Range: 5c0
		RequiresCondition: disabled
	RevealsShroudToIntelligenceOwner@DISABLED:
		Types: SatelliteScan
		Range: 5c0
		RequiresCondition: disabled
	RenderDetectionCircle:
	DetectCloaked:
		CloakTypes: Cloak, Underwater
		Range: 25c0
	WithIdleOverlay@spin:
		Sequence: idle-spin
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	Power:
		Amount: -100

nairon:
	Inherits: ^SecondarySuperWeapon
	Buildable:
		Queue: Support.Soviets
		Prerequisites: natech, !enoughiron, ~techlevel.5
		Description: Grants invulnerability to vehicles and structures.\nKills infantry.
	Tooltip:
		Name: Iron Curtain Device
	Selectable:
		Bounds: 136, 100, 0, -20
	WithSpriteBody:
		PauseOnCondition: chronodisable
	GrantExternalConditionPower@IRONCURTAIN:
		Icons:
			1: invuln
		Prerequisites:
			1: nairon
		Cursor: iron-curtain
		ChargeInterval: 6000
		Descriptions:
			1: Invulnerability
		LongDescs:
			1: Makes a group of units invulnerable\nfor 20 seconds.
		AllowMultiple: true
		Durations:
			1: 500
		Conditions:
			1: invulnerability
		Ranges:
			1: 2
		ValidStances: Ally, Neutral, Enemy
		SelectTargetSpeechNotification: SelectTarget
		EndChargeSpeechNotification: IronCurtainReady
		LaunchSpeechNotification: IronCurtainActivated
		IncomingSpeechNotification: IronCurtainActivated
		EndChargeSound: siroread.wav
		OnFireSound: siroon.wav
		DisplayTimerStances: Ally, Neutral, Enemy
		DisplayRadarPing: True
		PauseOnCondition: disabled || chronodisable
	ProvidesPrerequisite@swlimit:
		Prerequisite: enoughiron

namisl:
	Inherits: ^PrimarySuperWeapon
	Buildable:
		Queue: Support.Soviets
		Prerequisites: natech, !enoughnuke, ~techlevel.5
		Description: Provides an atomic bomb.\nRequires power to operate.\n  Special Ability: Atom Bomb
	Tooltip:
		Name: Nuclear Missile Silo
	Selectable:
		Bounds: 152, 104, 0, -50
	NukePower:
		Prerequisites:
			1: namisl
		Cursor: nuke
		Icons:
			1: abomb
		ChargeInterval: 9000
		Descriptions:
			1: Nuclear Missile
		LongDescs:
			1: Launches a devastating nuclear missile\nat a target location.
		AllowMultiple: true
		EndChargeSound: snukread.wav
		LaunchSound: snuklaun.wav
		SelectTargetSpeechNotification: SelectTarget
		EndChargeSpeechNotification: NuclearMissileReady
		LaunchSpeechNotification: NuclearMissileLaunched
		IncomingSpeechNotification: NuclearMissileLaunched
		MissileWeapon: atomic
		MissilePalette: player
		MissileDelay: 35
		SpawnOffset: 0,0,-1c0
		IsPlayerPalette: true
		DisplayTimerStances: Ally, Neutral, Enemy
		DisplayBeacon: True
		DisplayRadarPing: True
		BeaconPosters:
			1: nukeicon
		FlashType: Nuke
		ArrowSequence: arrow
		ClockSequence: clock
		CameraRange: 10c0
		CameraRemoveDelay: 75
		PauseOnCondition: disabled || chronodisable
		FlightDelay: 250
		FlightVelocity: 1c0
		TargetCircleRanges:
			1: 10c0
	WithNukeLaunchAnimation:
		RequiresCondition: !build-incomplete && !chronodisable
	ProvidesPrerequisite@swlimit:
		Prerequisite: enoughnuke

nawall:
	Inherits: ^Wall
	Buildable:
		Queue: Support.Soviets
		Prerequisites: ~techlevel.1
		BuildPaletteOrder: 10
		Description: Heavy wall capable of blocking units and projectiles.
	Tooltip:
		Name: Soviet Wall
	LineBuild:
		NodeTypes: nawall
	LineBuildNode:
		Types: nawall
	WithWallSpriteBody:
		Type: nawall
	Replaceable:
		Types: SovietGate

naflak:
	Inherits: ^VoxelLighting
	Inherits@AUTOTARGET: ^AutoTargetAir
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@MC: ^MindControllableBuilding
	Buildable:
		Queue: Support.Soviets
		BuildPaletteOrder: 60
		Prerequisites: naradr, ~techlevel.2
		Description: Automated anti-aircraft defense.
	Valued:
		Cost: 900
	Tooltip:
		Name: Flak Cannon
	Building:
		Footprint: x
		Dimensions: 1, 1
	Health:
		HP: 600
	Armor:
		Type: Steel
	RevealsShroud:
		Range: 8c0
	RevealsShroudToIntelligenceOwner:
		Types: SatelliteScan
		Range: 8c0
	Selectable:
		Bounds: 46, 62, 0, -20
	Turreted:
		TurnSpeed: 10
		InitialFacing: 224
		PreviewFacing: 224
		Offset: 450,0,0
	AttackTurreted:
		Voice: Attack
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	Armament:
		Weapon: FlakWeapon
	BodyOrientation:
		QuantizedFacings: 16
	RenderVoxels:
	WithVoxelTurret:
		RequiresCondition: !build-incomplete
	WithRangeCircle:
		Range: 12c0
		Type: flakcannon
	AutoTarget:
	Power:
		Amount: -50
	RequiresBuildableArea:
		Adjacent: 3

tesla:
	Inherits: ^SupportBuilding
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@MC: ^MindControllableBuilding
	Buildable:
		Queue: Support.Soviets
		BuildPaletteOrder: 70
		Prerequisites: naradr, ~techlevel.3
		Description: Advanced base defense.\nCan be buffed or made work during low power by Tesla Troopers.\nRequires power to operate.\n  Strong vs Infantry, Vehicles\n  Weak vs Aircraft
	Valued:
		Cost: 1200
	Tooltip:
		Name: Tesla Coil
	Building:
		Footprint: x
		Dimensions: 1, 1
	Health:
		HP: 600
	Armor:
		Type: Steel
	RevealsShroud:
		Range: 8c0
	RevealsShroudToIntelligenceOwner:
		Types: SatelliteScan
		Range: 8c0
	Selectable:
		Bounds: 44, 88, -2, -33
	Targetable@TeslaBoost:
		TargetTypes: TeslaBoost
		RequiresCondition: !powerdown
	WithTeslaChargeOverlay:
	Armament:
		Weapon: CoilBolt
		LocalOffset: 0,0,3072
		RequiresCondition: (!lowpower && !charged) || (lowpower && charged == 1)
	Armament@1:
		Weapon: OPCoilBolt
		LocalOffset: 0,0,3072
		RequiresCondition: (!lowpower && charged == 1) || (lowpower && charged == 2)
	Armament@2:
		Weapon: OPerCoilBolt
		LocalOffset: 0,0,3072
		RequiresCondition: (!lowpower && charged == 2) || (lowpower && charged >= 3)
	Armament@3:
		Weapon: OPestCoilBolt
		LocalOffset: 0,0,3072
		RequiresCondition: !lowpower && charged >= 3
	AttackTesla:
		Voice: Attack
		MaxCharges: 1
		ReloadDelay: 70
		ChargeAudio: btespow.wav
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	DetectCloaked:
		Range: 6c0
		RequiresCondition: !disabled
	RenderDetectionCircle:
	AutoTarget:
	GrantConditionOnPowerState@LOWPOWER:
		RequiresCondition: !charged
	WithRangeCircle:
		Range: 8c0
		Type: teslacoil
	Power:
		Amount: -75
	WithIdleOverlay@powered:
		Sequence: idle-powered
		PauseOnCondition: chronodisable
		RequiresCondition: !disabled && !build-incomplete
	ExternalCondition@CHARGED:
		Condition: charged

nalasr:
	Inherits: ^VoxelLighting
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@MC: ^MindControllableBuilding
	Buildable:
		Queue: Support.Soviets
		BuildPaletteOrder: 50
		Prerequisites: barracks, ~techlevel.1
		Description: Automated anti-infantry defense.
	Valued:
		Cost: 500
	Tooltip:
		Name: Sentry Gun
	Building:
		Footprint: x
		Dimensions: 1, 1
	Health:
		HP: 400
	Armor:
		Type: Steel
	RevealsShroud:
		Range: 7c0
	RevealsShroudToIntelligenceOwner:
		Types: SatelliteScan
		Range: 7c0
	Selectable:
		Bounds: 50, 30, 0, -12
	Turreted:
		TurnSpeed: 10
		InitialFacing: 224
		PreviewFacing: 224
		Offset: 320,0,0
	AttackTurreted:
		Voice: Attack
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	Armament:
		Weapon: vulcan
	DetectCloaked:
		Range: 5c0
	RenderDetectionCircle:
	BodyOrientation:
		QuantizedFacings: 16
	RenderVoxels:
	WithVoxelTurret:
		RequiresCondition: !build-incomplete
	WithRangeCircle:
		Range: 6c0
		Type: pillbox
	AutoTarget:
	RequiresBuildableArea:
		Adjacent: 4

# Yuri's Revenge Structures
nabnkr:
	Inherits: ^SupportBuilding
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@MC: ^MindControllableBuilding
	Inherits@shape: ^2x2Shape
	Buildable:
		Queue: Support.Soviets
		BuildPaletteOrder: 40
		Prerequisites: ~disabled
		Description: Static defense with fireports for 6 garrisoned soldiers.\nInfantry inside cannot be killed by garrison killers.
	Valued:
		Cost: 500
	Tooltip:
		Name: Battle Bunker
	Building:
		Footprint: xx xx
		Dimensions: 2,2
	Selectable:
		Bounds: 94, 94, 0, -10
	Health:
		HP: 600
	Armor:
		Type: Steel
	Cargo:
		Types: Garrisoner
		MaxWeight: 6
		PipCount: 6
		EjectOnDeath: true
		LoadedCondition: loaded
	-SpawnActorsOnSell@allies:
	-SpawnActorsOnSell@soviets:
	WithRangeCircle:
		Range: 6c0
	WithSpriteBody:
	WithIdleOverlay@Garrisoned:
		Sequence: garrisoned
		RequiresCondition: loaded
	AttackGarrisoned:
		Armaments: garrisoned
		PortOffsets: 768,0,1024, 448,-682,1024, -448,-682,1024, -768,0,1024, -448,682,1024, 448,682,1024
		PortYaws: 0, 176, 341, 512, 682, 853
		PortCones: 88, 88, 88, 88, 88, 88
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	RevealsShroud:
		Range: 6c0
	RevealsShroudToIntelligenceOwner:
		Types: SatelliteScan
		Range: 6c0

naindp:
	Inherits: ^BaseBuilding
	Inherits@MC: ^MindControllableBuilding
	Inherits@shape: ^3x3Shape
	Buildable:
		Queue: Building.Soviets
		BuildPaletteOrder: 120
		Prerequisites: narefn, natech, ~techlevel.4
		Description: Decreases vehicle costs by 25%.\nMaximum 1 can be built.\nCan not be captured.
		BuildLimit: 1
	Valued:
		Cost: 2500
	Tooltip:
		Name: Industrial Plant
	-Capturable:
	-CaptureNotification:
	-CapturableProgressBar:
	-CapturableProgressBlink:
	-GrantConditionOnPrerequisite@INSTANTCAPTURE:
	ProvidesPrerequisite@default:
	Building:
		Footprint: xxx xxx xxx
		Dimensions: 3,3
	Selectable:
		Bounds: 152, 164, 0, -50
	WithIdleOverlay@pistons:
		Sequence: idle-pistons
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	Health:
		HP: 1000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 6c0
	RevealsShroudToIntelligenceOwner:
		Types: SatelliteScan
		Range: 6c0
	Power:
		Amount: -200

# Custom Structures
nagatea:
	Inherits: ^Gate_A
	Buildable:
		Queue: Support.Soviets
		Prerequisites: ~techlevel.1
		BuildPaletteOrder: 20
	Tooltip:
		Name: Soviet Gate
	LineBuildNode:
		Types: nawall
	WithGateSpriteBody:
		Type: nawall
	Replacement:
		ReplaceableTypes: SovietGate
	PlaceBuildingVariants:
		Actors: nagateb

nagateb:
	Inherits: ^Gate_B
	-Buildable:
	Tooltip:
		Name: Soviet Gate
	LineBuildNode:
		Types: nawall
	WithGateSpriteBody:
		Type: nawall
	Replacement:
		ReplaceableTypes: SovietGate

napost:
	Inherits: ^BaseBuilding
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@EMPULSE: ^DisabledByEMP
	Buildable:
		Queue: Support.Soviets
		BuildPaletteOrder: 40
		Prerequisites: power, ~prerequisite.tesla_fence, ~techlevel.1
		Description: Stops infantry and blocks enemy fire.
	Valued:
		Cost: 150
	Tooltip:
		Name: Tesla Fence Post
	Health:
		HP: 500
	Armor:
		Type: Concrete
	LineBuild:
		Range: 10
		NodeTypes: teslafencenode
		SegmentType: nafnce
		SegmentsRequireNode: true
	Selectable:
		Bounds: 42, 44, 0, -12
	LineBuildNode:
		Types: teslafencenode
	Power:
		Amount: -5
	RevealsShroud:
		Range: 4c0
	WithIdleOverlay@LIGHTS:
		Sequence: lights
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	WithIdleOverlay@CHAINOFLIGHTS:
		Sequence: chainoflights
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	LineBuildSegmentExternalCondition:
		RequiresCondition: !build-incomplete && !disabled
		Condition: active-posts
	RequiresBuildableArea:
		Adjacent: 6

nafnce:
	Inherits: ^Wall
	Tooltip:
		Name: Tesla Fence
	LineBuild:
		NodeTypes: teslafence
	LineBuildNode:
		Types: teslafence
	-Crushable:
	-Sellable:
	-Targetable:
	-Building:
	Explodes:
		Weapon: UnitExplodeSmall
		EmptyWeapon: UnitExplodeSmall
	EnergyWall:
		ActiveCondition: active-posts == 2
		Weapon: TeslaFence
	GrantConditionOnLineBuildDirection@X:
		Direction: X
		Condition: teslafence-direction-x
	GrantConditionOnLineBuildDirection@Y:
		Direction: Y
		Condition: teslafence-direction-y
	-WithWallSpriteBody:
	ExternalCondition@ACTIVE:
		Condition: active-posts
	WithWallSpriteBody@XENABLED:
		RequiresCondition: teslafence-direction-x && active-posts == 2
		Type: teslafence
		Sequence: enabled-x
		Name: x-enabled
	WithWallSpriteBody@YENABLED:
		RequiresCondition: teslafence-direction-y && active-posts == 2
		Type: teslafence
		Sequence: enabled-y
		Name: y-enabled
	WithSpriteBody@XDISABLED:
		RequiresCondition: teslafence-direction-x && active-posts < 2
		Sequence: disabled-x
		Name: x-disabled
	WithSpriteBody@YDISABLED:
		RequiresCondition: teslafence-direction-y && active-posts < 2
		Sequence: disabled-y
		Name: y-disabled
	BlocksProjectiles:
		RequiresCondition: active-posts == 2
	DamageMultiplier: # Prevent all normal damage, but still allows direct kills from the post
		Modifier: 0
	Interactable:
		Bounds: 48, 24

naexpn:
	Inherits: ^ExpansionNode
	Transforms:
		IntoActor: exps
	RenderSprites:
		Image: gaexpn

napowb:
	Inherits: napowr
	Inherits@shape: ^2x3Shape
	-Buildable:
	-PlaceBuildingVariants:
	Building:
		Footprint: xx xx xx
		Dimensions: 2,3

narefb:
	Inherits: ^RefineryB
	Selectable:
		Bounds: 170, 150, -6, -33
	FreeActor:
		Actor: harv
	ProvidesPrerequisite@narefn:
		Prerequisite: narefn

narefc:
	Inherits: ^RefineryC
	Selectable:
		Bounds: 170, 150, -6, -33
	FreeActor:
		Actor: harv
	ProvidesPrerequisite@narefn:
		Prerequisite: narefn

narefd:
	Inherits: ^RefineryD
	Selectable:
		Bounds: 170, 150, -6, -33
	FreeActor:
		Actor: harv
	ProvidesPrerequisite@narefn:
		Prerequisite: narefn

naweab:
	Inherits: naweap
	Inherits@shape: ^3x5Shape
	-Buildable:
	-PlaceBuildingVariants:
	Building:
		Footprint: xxx xxx xxx xxx ===
		Dimensions: 3,5
	RallyPoint:
		Offset: 1,6
	Exit@1:
		ExitCell: 1,4

nadepb:
	Inherits: nadept
	Inherits@shape: ^3x4Shape
	-Buildable:
	-PlaceBuildingVariants:
	Building:
		Footprint: xxx === =x= ===
		Dimensions: 3,4
	RallyPoint:
		Offset: 1,4

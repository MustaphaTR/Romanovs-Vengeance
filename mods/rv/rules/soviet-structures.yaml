nacnst:
	Inherits: ^ConstructionYard
	Buildable:
		BuildPaletteOrder: 20
	ProvidesPrerequisite@soviets:
		Prerequisite: structures.soviets
	Production:
		Produces: Building.Soviets, Support.Soviets, Support.Baku
	ProductionQueue@Building:
		Type: Building.Soviets
	ProductionQueue@Support:
		Type: Support.Soviets
		Factions: america, germany, england, france, korea, japan, belarus, poland, ukraine, aussie, china, turkey, canada, cuba, libya, iraq, russia, vietnam, chile, mexico, mongolia, psicorps, psinepal, psisouth, psitrans, psimoon
	ProductionQueue@SupportBaku:
		Type: Support.Baku
		Factions: transcaucus, turkmen, tuva, russianfed, serbia
		Group: Support
		LowPowerModifier: 200
		ReadyAudio: ConstructionComplete
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Building
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionBar@Building:
		ProductionType: Building.Soviets
	ProductionBar@Support:
		ProductionType: Support.Soviets
	ProductionBar@SupportBaku:
		ProductionType: Support.Baku
	Transforms:
		IntoActor: smcv
	WithIdleOverlay@top:
		Sequence: idle-top
		RequiresCondition: !build-incomplete
	WithIdleOverlay@normal:
		Sequence: idle-normal
		RequiresCondition: !build-incomplete
	WithBuildingPlacedAnimation:
		RequiresCondition: !build-incomplete
	GrantConditionOnFaction@USSR:
		Condition: russia
		Factions: russia
	GrantConditionOnFaction@Iraq:
		Condition: iraq
		Factions: iraq
	GrantConditionOnFaction@Vietnam:
		Condition: vietnam
		Factions: vietnam
	GrantConditionOnFaction@Cuba:
		Condition: cuba
		Factions: cuba
	GrantConditionOnFaction@Libya:
		Condition: libya
		Factions: libya
	GrantConditionOnFaction@Chile:
		Condition: chile
		Factions: chile
	GrantConditionOnFaction@Mexico:
		Condition: mexico
		Factions: mexico
	GrantConditionOnFaction@Mongolia:
		Condition: mongolia
		Factions: mongolia
	GrantConditionOnFaction@Transcaucasia:
		Condition: transcaucus
		Factions: transcaucus
	GrantConditionOnFaction@Turkmenistan:
		Condition: turkmen
		Factions: turkmen
	GrantConditionOnFaction@Tuva:
		Condition: tuva
		Factions: tuva
	GrantConditionOnFaction@Russia:
		Condition: russianfed
		Factions: russianfed
	GrantConditionOnFaction@Serbia:
		Condition: serbia
		Factions: serbia
	WithIdleOverlay@USSR:
		Sequence: flag-russia
		Palette: ussr
		RequiresCondition: !build-incomplete && russia
	WithIdleOverlay@Iraq:
		Sequence: flag-iraq
		Palette: iraq
		RequiresCondition: !build-incomplete && iraq
	WithIdleOverlay@Vietnam:
		Sequence: flag-vietnam
		Palette: vietnam
		RequiresCondition: !build-incomplete && vietnam
	WithIdleOverlay@Cuba:
		Sequence: flag-cuba
		Palette: cuba
		RequiresCondition: !build-incomplete && cuba
	WithIdleOverlay@Libya:
		Sequence: flag-libya
		Palette: libya
		RequiresCondition: !build-incomplete && libya
	WithIdleOverlay@Chile:
		Sequence: flag-chile
		Palette: chile
		RequiresCondition: !build-incomplete && chile
	WithIdleOverlay@Mexico:
		Sequence: flag-mexico
		Palette: mexico
		RequiresCondition: !build-incomplete && mexico
	WithIdleOverlay@Mongolia:
		Sequence: flag-mongolia
		Palette: mongolia
		RequiresCondition: !build-incomplete && mongolia
	WithIdleOverlay@Transcaucasia:
		Sequence: flag-transcaucus
		Palette: transcaucasia
		RequiresCondition: !build-incomplete && transcaucus
	WithIdleOverlay@Turkmenistan:
		Sequence: flag-turkmen
		Palette: turkmenistan
		RequiresCondition: !build-incomplete && turkmen
	WithIdleOverlay@Tuva:
		Sequence: flag-tuva
		Palette: tuva
		RequiresCondition: !build-incomplete && tuva
	WithIdleOverlay@Russia:
		Sequence: flag-russianfed
		Palette: russia
		RequiresCondition: !build-incomplete && russianfed
	WithIdleOverlay@Serbia:
		Sequence: flag-serbia
		Palette: serbia
		RequiresCondition: !build-incomplete && serbia
	WithIdleOverlay@FlagShadow:
		Sequence: flag-shadow
		Palette: shadow
		IsPlayerPalette: false
		RequiresCondition: !build-incomplete && (russia || iraq || vietnam || cuba || libya || chile || mexico || mongolia || transcaucus || turkmen || tuva || russianfed || serbia)
	IsometricSelectable:
		DecorationHeight: 90
	Voiced:
		VoiceSet: SovietConstructionYardVoice
	RenderSprites:
		Image: nacnst

napowr:
	Inherits: ^PowerPlant
	Inherits@shape: ^3x2Shape
	Buildable:
		Queue: Building.Soviets
		Description: Provides power for other structures.\nCan be rotated.
	Tooltip:
		Name: Tesla Reactor
	Tooltip@NoRow:
		Name: Tesla Reactor
	Building:
		Footprint: xxx xxx
		Dimensions: 3,2
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	PlaceBuildingVariants:
		Actors: napowb
	IsometricSelectable:
		DecorationHeight: 45
	Voiced:
		VoiceSet: PowerPlantVoice
		Volume: 0.8

nahand:
	Inherits: ^Barracks
	Inherits@shape: ^2x2Shape
	Buildable:
		Queue: Building.Soviets
		Description: Trains infantry.
	Building:
		Footprint: xx xx
		Dimensions: 2,2
	Exit@1:
		SpawnOffset: -512,768,0
		ExitCell: 1,2
		Priority: 2
	Exit@2:
		SpawnOffset: -512,768,0
		ExitCell: 0,2
		Priority: 2
	Exit@fallback1:
		SpawnOffset: 0,724,0
		ExitCell: 2,2
	Exit@fallback2:
		SpawnOffset: 0,724,0
		ExitCell: 2,1
	Exit@fallback3:
		SpawnOffset: 724,0,0
		ExitCell: 2,0
	Exit@fallback4:
		SpawnOffset: 724,0,0
		ExitCell: 2,-1
	Exit@fallback5:
		SpawnOffset: 724,0,0
		ExitCell: 1,-1
	Exit@fallback6:
		SpawnOffset: 0,-724,0
		ExitCell: 0,-1
	Exit@fallback7:
		SpawnOffset: 0,-724,0
		ExitCell: -1,-1
	Exit@fallback8:
		SpawnOffset: 0,-724,0
		ExitCell: -1,0
	Exit@fallback9:
		SpawnOffset: -724,0,0
		ExitCell: -1,1
	Exit@fallback10:
		SpawnOffset: -724,0,0
		ExitCell: -1,2
	Production:
		Produces: Infantry.Soviets, Infantry.Cuba, Infantry.Iraq, Infantry.Baku, Infantry.Tuva
	ProductionQueue:
		Type: Infantry.Soviets
		Factions: america, germany, england, france, korea, japan, belarus, poland, ukraine, aussie, china, turkey, canada, libya, russia, vietnam, chile, mexico, mongolia, psicorps, psinepal, psisouth, psitrans, psimoon
	ProductionQueue@Cuba:
		Type: Infantry.Cuba
		Factions: cuba
		Group: Infantry
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Iraq:
		Type: Infantry.Iraq
		Factions: iraq
		Group: Infantry
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Baku:
		Type: Infantry.Baku
		Factions: transcaucus, turkmen, russianfed, serbia
		Group: Infantry
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Tuva:
		Type: Infantry.Tuva
		Factions: tuva
		Group: Infantry
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionBar:
		ProductionType: Infantry.Soviets
	ProductionBar@Cuba:
		ProductionType: Infantry.Cuba
	ProductionBar@Iraq:
		ProductionType: Infantry.Iraq
	ProductionBar@Baku:
		ProductionType: Infantry.Baku
	ProductionBar@Tuva:
		ProductionType: Infantry.Tuva
	RallyPoint:
		Path: 3,3
	ProvidesPrerequisite@nahand:
		Prerequisite: nahand
	ProvidesPrerequisite@mwfacref:
		Prerequisite: narefn
	IsometricSelectable:
		DecorationHeight: 135

narefn:
	Inherits: ^Refinery
	Buildable:
		Queue: Building.Soviets
	FreeActor:
		Actor: harv
	SmokeParticleEmitter@refinerysmoke1:
		Offset: -1024,-384,4096
	SmokeParticleEmitter@refinerysmoke2:
		Offset: 128,-1408,4096
	PlaceBuildingVariants:
		Actors: narefb, narefc, narefd
	IsometricSelectable:
		DecorationHeight: 90

naradr:
	Inherits: ^BaseBuilding
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@MC: ^MindControllableBuilding
	Inherits@shape: ^2x2Shape
	Inherits@AI: ^AIMicroManagable
	Buildable:
		Queue: Building.Soviets
		BuildPaletteOrder: 60
		Prerequisites: power, narefn, ~techlevel.2, ~!ai.naradr
		Description: Provides radar
		BuildDuration: 750
		BuildDurationModifier: 100
	ProvidesPrerequisite@AIbuildinglimit:
		RequiresCondition: ai-control
		Prerequisite: ai.naradr
	Valued:
		Cost: 1500
	Tooltip:
		Name: Radar Tower
	Tooltip@NoRow:
		Name: Radar Tower
	ProvidesPrerequisite:
		Prerequisite: radar
	ProvidesPrerequisite@default:
	ProvidesPrerequisite@russia:
		Prerequisite: radar.russia
		Factions: russia
	ProvidesPrerequisite@iraq:
		Prerequisite: radar.iraq
		Factions: iraq
	ProvidesPrerequisite@vietnam:
		Prerequisite: radar.vietnam
		Factions: vietnam
	ProvidesPrerequisite@cuba:
		Prerequisite: radar.cuba
		Factions: cuba
	ProvidesPrerequisite@libya:
		Prerequisite: radar.libya
		Factions: libya
	ProvidesPrerequisite@baku:
		Prerequisite: radar.baku
		Factions: transcaucus, turkmen, tuva, russianfed, serbia
	Building:
		Footprint: xx xx
		Dimensions: 2,2
	Health:
		HP: 100000
	Armor:
		Type: Wood
	ExternalCondition@disableradar:
		Condition: disableradar
	ProvidesRadar:
		RequiresCondition: !disabled && !chronodisable && !disableradar
	RevealsShroud:
		Range: 10c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 10c0
	SupportPowerChargeBar:
	ParatroopersPower@tesladrop:
		OrderName: RussianTeslaDrop
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.russia
		Icons:
			1: tesladrop
		ChargeInterval: 4500
		Descriptions:
			1: Tesla Drop
		LongDescs:
			1: A Cargo Plane drops a Tesla Tank\n and 3 Tesla Troopers anywhere on the map.
		SelectTargetSpeechNotification: SelectTarget
		EndChargeSpeechNotification: ParatroopersReady
		DropItems:
			1: shk, shk, shk, ttnk
		SquadSizes:
			1: 1
		QuantizedFacings: 8
		UnitTypes:
			1: pdplane
		CameraActor: camera
		DisplayBeacon: True
		BeaconPosters:
			1: tesdicon
		ArrowSequence: arrow
		ClockSequence: clock
		UseDirectionalTarget: True
		DirectionArrowAnimation: swdirection
		DirectionArrowPalette: mouse
	NukePower@radiationmissile:
		OrderName: IraqiRadMissile
		Cursor: nuke
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.iraq
		Icons:
			1: radmissile
		ChargeInterval: 6000
		Descriptions:
			1: Radiation Missile
		LongDescs:
			1: Fires a missile that deals low damage\nand leaves radiation.
		LaunchSound: sradlaun.wav
		SelectTargetSpeechNotification: SelectTarget
		MissileWeapon: RadiationMissile
		MissilePalette: player
		IsPlayerPalette: true
		CameraRange: 8c0
		CameraRemoveDelay: 200
		FlightVelocity: 1c0
		FlightDelay: 100
		DisplayBeacon: True
		BeaconPosters:
			1: radmicon
		ArrowSequence: arrow
		ClockSequence: clock
		TrailInterval: 0
		TrailImage: smokeyrad
		TrailSequences: idle
		CircleRanges:
			1: 4c0
		CircleColor: FFFFFFFF
		CircleBorderColor: 00000060
	DetonateWeaponPower@instanbunker:
		OrderName: VietnameseInstantBunker
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.vietnam
		Icons:
			1: bunker
		ChargeInterval: 3000
		Descriptions:
			1: Instant Bunker
		LongDescs:
			1: Places a bunker anywhere on the map.
		SelectTargetSpeechNotification: SelectTarget
		Weapons:
			1: BunkerSpawner
		ActivationSequence:
	DetonateWeaponPower@ambush:
		OrderName: LibyanAmbush
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.libya
		Icons:
			1: ambush
		ChargeInterval: 6000
		Descriptions:
			1: Ambush
		LongDescs:
			1: Spawns 9 Conscripts and 6 Flak Troopers\nanywhere on the map.
		SelectTargetSpeechNotification: SelectTarget
		Weapons:
			1: AmbushSpawner
		ActivationSequence:
		CameraRange: 8c0
		CameraRemoveDelay: 25
	GrantExternalConditionPower@deathbombs:
		OrderName: CubanDeathBombs
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.cuba
		Icons:
			1: deathbombs
		ChargeInterval: 3000
		Descriptions:
			1: Death Bombs
		LongDescs:
			1: Arms a group of friendly units with explosives that trigger when unit dies.
		SelectTargetSpeechNotification: SelectTarget
		Durations:
			1: -1
		Conditions:
			1: deathbombs
		Dimensions:
			1: 3,3
		Footprints:
			1: _x_ xxx _x_
		OnFireSound: icraatta.wav
	AirstrikePowerRV@clustermines:
		ActivationDelay: 125
		OrderName: CubanClusterMines
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: disabled
		Icons:
			1: cluster
		ChargeInterval: 4500
		Descriptions:
			1: Cluster Mines
		LongDescs:
			1: A Cargo plane drops 13 mines\nanywhere on the map.
		SelectTargetSpeechNotification: SelectTarget
		IncomingSpeechNotification: WarningEnemyAirstrikeInitiated
		UnitTypes:
			1: pdplane.cluster_mines
		SquadSizes:
			1: 1
		QuantizedFacings: 8
		CameraActor: camera.5c0
		DisplayBeacon: True
		BeaconPosters:
			1: mineicon
		ArrowSequence: arrow
		ClockSequence: clock
		UseDirectionalTarget: True
		DirectionArrowAnimation: swdirection
		DirectionArrowPalette: mouse
	AirstrikePower@leafletdrop:
		OrderName: BakuPactLeafletDrop
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.baku
		Icons:
			1: leaflet
		ChargeInterval: 3750
		Descriptions:
			1: Leaflet Drop
		LongDescs:
			1: A Cargo Plane drops leaflets\nanywhere on the map.\nLeaflets slow enemy infantry\nand vehicle movement and\nfire speed.
		SelectTargetSpeechNotification: SelectTarget
		IncomingSpeechNotification: WarningEnemyAirstrikeInitiated
		UnitTypes:
			1: pdplane.leaflet.baku
		SquadSizes:
			1: 1
		QuantizedFacings: 8
		CameraActor: CAMERA
		CameraRemoveDelay: 100
		DisplayBeacon: True
		BeaconPosters:
			1: leaficon
		ArrowSequence: arrow
		ClockSequence: clock
		UseDirectionalTarget: True
		DirectionArrowAnimation: swdirection
		DirectionArrowPalette: mouse
	WithIdleOverlay@dish:
		Sequence: idle-dish
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	Targetable:
		TargetTypes: Ground, C4, DetonateAttack, Structure, NonGarrisonableStructure, SpyInfiltrate
	InfiltrateForSupportPowerReset:
		Types: SpyInfiltrate
	InfiltrateForExploration:
		Types: SpyInfiltrate
		InfiltratedNotification: RadarSabotaged
		InfiltrationNotification: BuildingInfiltratedRadarSabotaged
	Power:
		Amount: -75
	IsometricSelectable:
		DecorationHeight: 90
	Voiced:
		VoiceSet: RadarVoice
		Volume: 0.8

mine:
	Inherits@1: ^SpriteActor
	Interactable:
		Bounds: 579, 1158
	WithSpriteBody:
	HiddenUnderFog:
	RevealsShroud:
		Range: 1c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 1c0
	Mine:
		CrushClasses: mine
		DetonateClasses: mine
		BlockFriendly: false
	Health:
		HP: 5000
		NotifyAppliedDamage: false
	Armor:
		Type: Light
	Cloak:
		CloakSound:
		UncloakSound:
		Palette:
		InitialDelay: 0
	Tooltip:
		Name: Mine
		GenericName: Mine
		RequiresCondition: showownername
	Tooltip@NoRow:
		Name: Mine
		GenericName: Mine
		ShowOwnerRow: false
		RequiresCondition: !showownername
	GrantConditionOnPrerequisite@SHOWOWNERNAME:
		Condition: showownername
		Prerequisites: global-showownername
	Targetable:
		TargetTypes: Ground, Mine
	Mobile:
		Speed: 1
		Locomotor: wheeled
	RejectsOrders:
	HitShape:
	MapEditorData:
		Categories: System
	Explodes:
		Weapon: MineExplosion
	RenderSprites:
		PlayerPalette: infantry

naweap:
	Inherits: ^WarFactory
	Buildable:
		Queue: Building.Soviets
	ProvidesPrerequisite@naweap:
		Prerequisite: naweap
	Production:
		Produces: Vehicle.Soviets, Vehicle.USSR, Vehicle.Iraq, Vehicle.Cuba, Vehicle.Libya, Vehicle.Baku
	ProductionQueue:
		Type: Vehicle.Soviets
		Factions: america, germany, england, france, korea, japan, belarus, poland, ukraine, aussie, china, turkey, canada, vietnam, chile, mexico, mongolia, psicorps, psinepal, psisouth, psitrans, psimoon
	ProductionQueue@USSR:
		Type: Vehicle.USSR
		Factions: russia
		Group: Vehicle
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Iraq:
		Type: Vehicle.Iraq
		Factions: iraq
		Group: Vehicle
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Cuba:
		Type: Vehicle.Cuba
		Factions: cuba
		Group: Vehicle
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Libya:
		Type: Vehicle.Libya
		Factions: libya
		Group: Vehicle
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Baku:
		Type: Vehicle.Baku
		Factions: transcaucus, turkmen, tuva, russianfed, serbia
		Group: Vehicle
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionBar:
		ProductionType: Vehicle.Soviets
	ProductionBar@USSR:
		ProductionType: Vehicle.USSR
	ProductionBar@Iraq:
		ProductionType: Vehicle.Iraq
	ProductionBar@Cuba:
		ProductionType: Vehicle.Cuba
	ProductionBar@Libya:
		ProductionType: Vehicle.Libya
	ProductionBar@Baku:
		ProductionType: Vehicle.Baku
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	PlaceBuildingVariants:
		Actors: naweab, naweac, nawead
	IsometricSelectable:
		DecorationHeight: 90

nayard:
	Inherits: ^Shipyard
	Buildable:
		Queue: Building.Soviets
	Production:
		Produces: Ship.Soviets
	ProductionQueue:
		Type: Ship.Soviets
	ProductionBar:
		ProductionType: Ship.Soviets
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	AirstrikePower@navalmines:
		OrderName: SovietNavalMines
		Icons:
			1: navalmines
		Prerequisites:
			1: nayard
		ChargeInterval: 3000
		Descriptions:
			1: Naval Mines
		LongDescs:
			1: A Cargo plane drops 5 naval mines\nanywhere on the map.
		SelectTargetSpeechNotification: SelectTarget
		UnitTypes:
			1: pdplane.naval_mines
		SquadSizes:
			1: 1
		QuantizedFacings: 8
		CameraActor: camera.5c0
		DisplayBeacon: True
		BeaconPosters:
			1: nmineicon
		ArrowSequence: arrow
		ClockSequence: clock
		UseDirectionalTarget: True
		DirectionArrowAnimation: swdirection
		DirectionArrowPalette: mouse
	IsometricSelectable:
		DecorationHeight: 120

nmine:
	Inherits: mine
	Mine:
		CrushClasses: nmine
		DetonateClasses: nmine
	Tooltip:
		Name: Naval Mine
	Tooltip@NoRow:
		Name: Naval Mine
	RevealsShroud:
		Range: 3c0
	# RevealsShroudToIntelligenceOwner:
	#	Range: 3c0
	Targetable:
		TargetTypes: Ground, Water, Underwater, Mine
	-Mobile:
	Building:
		Footprint: x
		Dimensions: 1,1
		TerrainTypes: Water
	Cloak:
		CloakTypes: Cloak, Underwater
	Explodes:
		Weapon: MineExplosion
	RenderSprites:
		PlayerPalette: player

nadept:
	Inherits: ^ServiceDepot
	Inherits@shape: ^4x3Shape
	HitShape:
		TargetableOffsets: 0,0,0, -360,360,0, 360,-360,0, -1080,1080,0, -360,1800,0, -1800,360,0, 360,1080,0, -360,-1080,0, 1080,360,0, -1080,-360,0
	Buildable:
		Queue: Building.Soviets
		Prerequisites: naweap, ~techlevel.1
		Description: Repairs vehicles and removes Terror Drones for a price.\nCan be rotated.
	ProvidesPrerequisite@default:
		Prerequisite: nadept
	Building:
		Footprint: x+++ x+++ x+++
		Dimensions: 4,3
	RallyPoint:
		Path: 4,1
	WithSpriteBody:
		PauseOnCondition: chronodisable
	WithIdleOverlay@normal:
		Sequence: idle-normal
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	PlaceBuildingVariants:
		Actors: nadepb
	IsometricSelectable:
		DecorationHeight: 90

naheli:
	Inherits: ^BaseBuilding
	Inherits@MC: ^MindControllableBuilding
	Inherits@SPY: ^DisabledByInfiltration
	Inherits@shape: ^3x3Shape
	Buildable:
		Queue: Building.Soviets
		BuildPaletteOrder: 100
		Prerequisites: naradr, ~techlevel.2
		Description: Produces Soviet aircraft.
		BuildDuration: 125
		BuildDurationModifier: 100
	Valued:
		Cost: 500
	Tooltip:
		Name: Helipad
	Tooltip@NoRow:
		Name: Helipad
	ProvidesPrerequisite@default:
	Building:
		Footprint: xxx xxx xxx
		Dimensions: 3,3
	Health:
		HP: 75000
	RevealsShroud:
		Range: 6c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	Armor:
		Type: Wood
	Reservable:
	RallyPoint:
		Path: 3,1
		Palette: mouse
		IsPlayerPalette: false
	Exit@1:
		Facing: 640
		ExitCell: 1,1
		SpawnOffset: -384,128,0
	GrantExternalConditionToProduced:
		Condition: produced
	Production:
		Produces: Aircraft.Soviets, Aircraft.USSR, Aircraft.Vietnam, Aircraft.Libya
		PauseOnCondition: chronodisable || infiltrated
	ProductionQueue:
		Type: Aircraft.Soviets
		Factions: america, germany, england, france, korea, japan, belarus, poland, ukraine, aussie, china, turkey, canada, cuba, iraq, chile, mexico, mongolia, psicorps, psinepal, psisouth, psitrans, psimoon, transcaucus, turkmen, tuva, russianfed, serbia
		Group: Aircraft
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@USSR:
		Type: Aircraft.USSR
		Factions: russia
		Group: Aircraft
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Vietnam:
		Type: Aircraft.Vietnam
		Factions: vietnam
		Group: Aircraft
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Libya:
		Type: Aircraft.Libya
		Factions: libya
		Group: Aircraft
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionBar:
		ProductionType: Aircraft.Soviets
	ProductionBar@USSR:
		ProductionType: Aircraft.USSR
	ProductionBar@Vietnam:
		ProductionType: Aircraft.Vietnam
	ProductionBar@Libya:
		ProductionType: Aircraft.Libya
	Power:
		Amount: -50
	Targetable:
		TargetTypes: Ground, C4, DetonateAttack, Structure, NonGarrisonableStructure, SpyInfiltrate
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	WithIdleOverlay@dish:
		Sequence: idle-dish
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	IsometricSelectable:
		DecorationHeight: 60
	Voiced:
		VoiceSet: AirfieldVoice
		Volume: 0.8

nanrct:
	Inherits: ^PowerPlant
	Inherits@shape: ^4x4Shape
	Buildable:
		Queue: Building.Soviets
		BuildPaletteOrder: 110
		Prerequisites: natech, ~techlevel.3
		BuildDuration: 1000
	Valued:
		Cost: 1500
	Tooltip:
		Name: Nuclear Reactor
	Tooltip@NoRow:
		Name: Nuclear Reactor
	Building:
		Footprint: xxxx xxxx xxxx _xx_
		Dimensions: 4,4
	Health:
		HP: 100000
	Armor:
		Type: Concrete
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	Explodes:
		Type: CenterPosition
		Weapon: NukePayload
		EmptyWeapon: NukePayload
	Power:
		Amount: 1000
	IsometricSelectable:
		DecorationHeight: 60
	Voiced:
		VoiceSet: NuclearReactorVoice
		Volume: 0.8

natech:
	Inherits: ^BattleLab
	Inherits@shape: ^3x3Shape
	Inherits@AI: ^AIMicroManagable
	Buildable:
		Queue: Building.Soviets
		Prerequisites: naradr, ~techlevel.3, ~!ai.natech
		Description: Allows deployment of advanced units.
	ProvidesPrerequisite@AIbuildinglimit:
		RequiresCondition: ai-control
		Prerequisite: ai.natech
	ProvidesPrerequisite@default:
	Building:
		Footprint: xxx xxx xxx
		Dimensions: 3,3
	IsometricSelectable:
		DecorationHeight: 120
	Voiced:
		VoiceSet: TechCenterVoice
		Volume: 0.8

naclon:
	Inherits: ^BaseBuilding
	Inherits@MC: ^MindControllableBuilding
	Inherits@shape: ^2x2Shape
	Buildable:
		Queue: Building.Soviets
		BuildPaletteOrder: 120
		Prerequisites: ~disabled # natech
		Description: Clones most trained infantry.\nMaximum 1 can be built.
		BuildLimit: 1
	Valued:
		Cost: 2000
	Tooltip:
		Name: Cloning Vats
	Tooltip@NoRow:
		Name: Cloning Vats
	Building:
		Footprint: xx xx
		Dimensions: 2, 2
	Health:
		HP: 75000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 6c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	Power:
		Amount: -200
	ExitsDebugOverlay:
	Exit@1:
		SpawnOffset: -640,640,0
		ExitCell: 1,2
		Priority: 2
	Exit@2:
		SpawnOffset: -640,640,0
		ExitCell: 0,2
		Priority: 2
	Exit@fallback1:
		SpawnOffset: 0,724,0
		ExitCell: 2,2
	Exit@fallback2:
		SpawnOffset: 0,724,0
		ExitCell: 2,1
	Exit@fallback3:
		SpawnOffset: 724,0,0
		ExitCell: 2,0
	Exit@fallback4:
		SpawnOffset: 724,0,0
		ExitCell: 2,-1
	Exit@fallback5:
		SpawnOffset: 724,0,0
		ExitCell: 1,-1
	Exit@fallback6:
		SpawnOffset: 0,-724,0
		ExitCell: 0,-1
	Exit@fallback7:
		SpawnOffset: 0,-724,0
		ExitCell: -1,-1
	Exit@fallback8:
		SpawnOffset: 0,-724,0
		ExitCell: -1,0
	Exit@fallback9:
		SpawnOffset: -724,0,0
		ExitCell: -1,1
	Exit@fallback10:
		SpawnOffset: -724,0,0
		ExitCell: -1,2
	WithSpriteBody:
		PauseOnCondition: chronodisable
	Production:
		Produces: Clone.Soviets
	RallyPoint:
		Path: 3,3
		Palette: mouse
		IsPlayerPalette: false
	ClonesProducedUnits:
		CloneableTypes: Infantry
		ProductionType: Clone.Soviets
	AcceptsDeliveredCash:
	IsometricSelectable:
		DecorationHeight: 90
	Voiced:
		VoiceSet: CloningVatsVoice
		Volume: 0.8

napsis:
	Inherits: ^BaseBuilding
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@MC: ^MindControllableBuilding
	Inherits@shape: ^2x2Shape
	Buildable:
		Queue: Support.Soviets, Support.Baku
		BuildPaletteOrder: 80
		Prerequisites: ~disabled # natech, ~techlevel.4
		Description: Detects enemy units and structures.
	Valued:
		Cost: 1500
	Tooltip:
		Name: Psychic Sensor
	Tooltip@NoRow:
		Name: Psychic Sensor
	Building:
		Footprint: xx xx
		Dimensions: 2,2
	Health:
		HP: 50000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 10c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	GpsASProvider:
		RequiresCondition: !disabled && !build-incomplete && !chronodisable
	RenderDetectionCircle:
	WithRangeCircle:
		Range: 25c0
		Type: sensor
	DetectCloaked:
		CloakTypes: Cloak, Underwater
		Range: 25c0
	WithIdleOverlay@spin:
		Sequence: idle-spin
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	Power:
		Amount: -200
	IsometricSelectable:
		DecorationHeight: 120
	Voiced:
		VoiceSet: PsychicSensorVoice
		Volume: 0.8

nairon:
	Inherits: ^SecondarySuperWeapon
	Buildable:
		Queue: Support.Soviets, Support.Baku
		Prerequisites: natech, !enoughiron, ~techlevel.5
		Description: Grants invulnerability to vehicles and structures.\nKills infantry.
	Tooltip:
		Name: Iron Curtain Device
	Tooltip@NoRow:
		Name: Iron Curtain Device
	WithSpriteBody:
		PauseOnCondition: chronodisable
	GrantExternalConditionPower@IRONCURTAIN:
		Icons:
			1: invuln
		Prerequisites:
			1: nairon
		Cursor: iron-curtain
		ChargeInterval: 6000
		Descriptions:
			1: Invulnerability
		LongDescs:
			1: Makes a group of units invulnerable\nfor 20 seconds.\n\nKills infantry.
		AllowMultiple: true
		Durations:
			1: 500
		Conditions:
			1: invulnerability
		Dimensions:
			1: 3,3
		Footprints:
			1: xxx xxx xxx
		ValidRelationships: Ally, Neutral, Enemy
		SelectTargetSpeechNotification: SelectTarget
		EndChargeSpeechNotification: IronCurtainReady
		LaunchSpeechNotification: IronCurtainActivated
		IncomingSpeechNotification: IronCurtainActivated
		EndChargeSound: siroread.wav
		OnFireSound: siroon.wav
		DisplayTimerRelationships: Ally, Neutral, Enemy
		DisplayRadarPing: True
		PauseOnCondition: disabled || chronodisable
	ProvidesPrerequisite@swlimit:
		Prerequisite: enoughiron
	AnnounceOnSeen:
		Notification: IronCurtainDetected
	IsometricSelectable:
		DecorationHeight: 75
	Voiced:
		VoiceSet: IronCurtainDeviceVoice
		Volume: 0.8

namisl:
	Inherits: ^PrimarySuperWeapon
	Buildable:
		Queue: Support.Soviets
		Prerequisites: natech, !enoughnuke, ~techlevel.5
		Description: Provides an atomic bomb.\nRequires power to operate.\n  Special Ability: Atom Bomb
	Tooltip:
		Name: Nuclear Missile Silo
	Tooltip@NoRow:
		Name: Nuclear Missile Silo
	NukePower:
		Prerequisites:
			1: namisl
		Cursor: nuke
		Icons:
			1: abomb
		ChargeInterval: 9000
		Descriptions:
			1: Nuclear Missile
		LongDescs:
			1: Launches a devastating nuclear missile\nat a target location.
		AllowMultiple: true
		EndChargeSound: snukread.wav
		LaunchSound: snuklaun.wav
		SelectTargetSpeechNotification: SelectTarget
		EndChargeSpeechNotification: NuclearMissileReady
		LaunchSpeechNotification: NuclearMissileLaunched
		IncomingSpeechNotification: NuclearMissileLaunched
		MissileWeapon: atomic
		MissilePalette: player
		SpawnOffset: 0,0,-1c0
		IsPlayerPalette: true
		DisplayTimerRelationships: Ally, Neutral, Enemy
		DisplayBeacon: True
		DisplayRadarPing: True
		BeaconPosters:
			1: nukeicon
		ArrowSequence: arrow
		ClockSequence: clock
		CameraRange: 10c0
		CameraRemoveDelay: 200
		PauseOnCondition: disabled || chronodisable
		FlightDelay: 250
		FlightVelocity: 1c0
		TrailInterval: 1
		TrailImage: nukepuff
		TrailSequences: idle
		CircleRanges:
			1: 10c0
		CircleColor: FFFFFFFF
		CircleBorderColor: 00000060
	ProvidesPrerequisite@swlimit:
		Prerequisite: enoughnuke
	AnnounceOnSeen:
		Notification: NuclearSiloDetected
	WithSupportPowerActivationOverlay:
		Sequence: smoke
		Palette: effect50alpha
	IsometricSelectable:
		DecorationHeight: 120
	Voiced:
		VoiceSet: NuclearSiloVoice
		Volume: 0.8

nawall:
	Inherits: ^Wall
	Buildable:
		Queue: Support.Soviets, Support.Baku
		Prerequisites: ~techlevel.1
		BuildPaletteOrder: 10
		Description: Heavy wall capable of blocking units and projectiles.
	Tooltip:
		Name: Soviet Wall
	Tooltip@NoRow:
		Name: Soviet Wall
	LineBuild:
		NodeTypes: nawall
	LineBuildNode:
		Types: nawall
	WithWallSpriteBody:
		Type: nawall
	Replaceable:
		Types: SovietGate

naflak:
	Inherits: ^VoxelLighting
	Inherits@AUTOTARGET: ^AutoTargetAir
	Inherits@DRAIN: ^DiskDrainable
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@MC: ^MindControllableBuilding
	Buildable:
		Queue: Support.Soviets, Support.Baku
		BuildPaletteOrder: 60
		Prerequisites: naradr, ~techlevel.2
		Description: Automated anti-aircraft defense.\nRequires power to operate.\nCan detect cloaked units.\nCan be placed on water.
		BuildDuration: 375
		BuildDurationModifier: 100
	Valued:
		Cost: 700
	Tooltip:
		Name: Flak Cannon
	Tooltip@NoRow:
		Name: Flak Cannon
	Building:
		Footprint: x
		Dimensions: 1, 1
	Health:
		HP: 60000
	Armor:
		Type: Steel
	RevealsShroud:
		Range: 8c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	Turreted:
		TurnSpeed: 40
		InitialFacing: 896
		Offset: 450,0,0
		RealignDelay: -1
	AttackTurreted:
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	Armament:
		Weapon: FlakWeapon
		LocalOffset: 640,0,1536
		MuzzleSequence: muzzle
	WithMuzzleOverlay:
	BodyOrientation:
		QuantizedFacings: 16
	RenderVoxels:
	WithVoxelTurret:
		RequiresCondition: !build-incomplete
	GrantCondition@IDISABLE:
		RequiresCondition: lowpower || powerdown || emp || diskdrain
	WithRangeCircle:
		Range: 12c0
		Type: aa
	AutoTarget:
	Power:
		Amount: -30
	RequiresBuildableArea:
		Adjacent: 3
	IsometricSelectable:
		Class: naflak
		DecorationHeight: 60
	WithIdleOverlay@waves:
		Sequence: idle-waves
		RequiresCondition: in_water
	DetectCloaked:
		Range: 5c0
		RequiresCondition: !disabled
	RenderDetectionCircle:

tesla:
	Inherits: ^SupportBuilding
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@DRAIN: ^DiskDrainable
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@MC: ^MindControllableBuilding
	Buildable:
		Queue: Support.Soviets, Support.Baku
		BuildPaletteOrder: 70
		Prerequisites: naradr, ~techlevel.3
		Description: Advanced base defense.\nCan be buffed or made work during low power by Tesla Troopers.\nRequires power to operate.\nCan detect cloaked units.\nCan be placed on water.\n  Strong vs Infantry, Vehicles\n  Weak vs Aircraft
		BuildDuration: 625
		BuildDurationModifier: 100
	Valued:
		Cost: 1500
	Tooltip:
		Name: Tesla Coil
	Tooltip@NoRow:
		Name: Tesla Coil
	Building:
		Footprint: x
		Dimensions: 1, 1
	Health:
		HP: 60000
	Armor:
		Type: Steel
	RevealsShroud:
		Range: 8c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 8c0
	Targetable@TeslaBoost:
		TargetTypes: TeslaBoost
		RequiresCondition: !powerdown
	WithTeslaChargeOverlay:
	Armament:
		Weapon: CoilBolt
		LocalOffset: 0,0,3072
		RequiresCondition: (!lowpower && !charged) || (lowpower && charged == 1)
	Armament@1:
		Weapon: OPCoilBolt
		LocalOffset: 0,0,3072
		RequiresCondition: (!lowpower && charged == 1) || (lowpower && charged == 2)
	Armament@2:
		Weapon: OPerCoilBolt
		LocalOffset: 0,0,3072
		RequiresCondition: (!lowpower && charged == 2) || (lowpower && charged >= 3)
	Armament@3:
		Weapon: OPestCoilBolt
		LocalOffset: 0,0,3072
		RequiresCondition: !lowpower && charged >= 3
	AttackTesla:
		MaxCharges: 3
		ReloadDelay: 80
		ChargeAudio: btespow.wav
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	DetectCloaked:
		Range: 7c0
		RequiresCondition: !disabled
	RenderDetectionCircle:
	AutoTarget:
	GrantConditionOnPowerState@LOWPOWER:
		RequiresCondition: !charged
	GrantCondition@IDISABLE:
		RequiresCondition: lowpower || powerdown || emp || diskdrain
	WithRangeCircle:
		Range: 8c0
		Type: teslacoil
	Power:
		Amount: -75
	WithIdleOverlay@powered:
		Sequence: idle-powered
		PauseOnCondition: chronodisable
		RequiresCondition: !disabled && !build-incomplete
	ExternalCondition@CHARGED:
		Condition: charged
	IsometricSelectable:
		Class: tesla
		DecorationHeight: 75
	WithIdleOverlay@waves:
		Sequence: idle-waves
		RequiresCondition: in_water
	Voiced:
		VoiceSet: TeslaCoilVoice
		Volume: 0.8

nalasr:
	Inherits: ^SupportBuilding
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@MC: ^MindControllableBuilding
	Buildable:
		Queue: Support.Soviets, Support.Baku
		BuildPaletteOrder: 50
		Prerequisites: nahand, ~techlevel.1
		Description: Automated anti-infantry defense.\nCan detect cloaked units.\nCan be placed on water.
		BuildDuration: 250
		BuildDurationModifier: 100
	Valued:
		Cost: 500
	Tooltip:
		Name: Sentry Gun
	Tooltip@NoRow:
		Name: Sentry Gun
	Health:
		HP: 40000
	Armor:
		Type: Steel
	RevealsShroud:
		Range: 7c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 7c0
	Turreted:
		TurnSpeed: 40
		InitialFacing: 896
		Offset: 0,0,0
		RealignDelay: -1
	AttackTurreted:
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	Armament:
		Weapon: vulcan
		LocalOffset: 702,128,768, 702,-128,768
		MuzzleSequence: muzzle
	WithMuzzleOverlay:
	DetectCloaked:
		Range: 5c0
	RenderDetectionCircle:
	BodyOrientation:
		QuantizedFacings: 16
	WithSpriteTurret:
		RequiresCondition: !build-incomplete
	WithRangeCircle:
		Range: 6c0
		Type: pillbox
	AutoTarget:
	RequiresBuildableArea:
		Adjacent: 4
	IsometricSelectable:
		Class: nalasr
		DecorationHeight: 30
	WithIdleOverlay@waves:
		Sequence: idle-waves
		RequiresCondition: in_water

# Yuri's Revenge Structures
nabnkr:
	Inherits: ^SupportBuilding
	Inherits@AUTOTARGET: ^AutoTargetAll
	Inherits@MC: ^MindControllableBuilding
	Inherits@shape: ^2x2Shape
	Buildable:
		Queue: Support.Soviets, Support.Baku
		BuildPaletteOrder: 40
		Prerequisites: ~disabled
		Description: Static defense with fireports for 6 garrisoned soldiers.\nInfantry inside cannot be killed by garrison killers.\nComes with a Conscript inside.
	Valued:
		Cost: 500
	CustomSellValue:
		Value: 0
	Tooltip:
		Name: Battle Bunker
	Tooltip@NoRow:
		Name: Battle Bunker
	Building:
		Footprint: xx xx
		Dimensions: 2,2
		TerrainTypes: Clear, Rough, Road, DirtRoad
	Health:
		HP: 60000
	Armor:
		Type: Steel
	Cargo:
		Types: Garrisoner
		MaxWeight: 6
		InitialUnits: e2
		AfterLoadDelay: 0
		BeforeUnloadDelay: 0
		AfterUnloadDelay: 0
		# EjectOnDeath: true # This causes desyncs.
		LoadedCondition: loaded
	WithCargoSounds:
		EnterSound: ugarris.wav
		ExitSound: ugarris.wav
	-SpawnActorsOnSell@allies:
	-SpawnActorsOnSell@soviets:
	-SpawnActorsOnSell@psicorps:
	WithRangeCircle:
		Range: 6c0
	WithSpriteBody:
	WithIdleOverlay@Garrisoned:
		Sequence: garrisoned
		RequiresCondition: loaded && !build-incomplete
	AttackOpenTopped:
		Armaments: garrisoned, garrisoned-secondary
		PortOffsets: 768,0,1024, 448,-682,1024, -448,-682,1024, -768,0,1024, -448,682,1024, 448,682,1024
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	RevealsShroud:
		Range: 6c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	WithCargoPipsDecoration:
		EmptySequence: pip-garrison-empty
		FullSequence: pip-garrison-green
		Margin: 4, 3
		PipStride: 4, 2
		Palette: ra
		Position: BottomLeft
		RequiresSelection: true
		CustomPipSequences:
			gray: pip-garrison-gray
			yellow: pip-garrison-yellow
			blue: pip-garrison-blue
			red: pip-garrison-red
	EngineerRepairable:
		RequiresCondition: !ivanbomb && !sealC4 && !commandoC4 && !teslabomb && !toxinbomb && damaged
	GrantConditionOnDamageState@DAMAGED:
		Condition: damaged
		ValidDamageStates: Light, Medium, Heavy, Critical
	IsometricSelectable:
		DecorationHeight: 45
	Voiced:
		VoiceSet: BattleBunkerVoice
		Volume: 0.8

naindp:
	Inherits: ^BaseBuilding
	Inherits@MC: ^MindControllableBuilding
	Inherits@shape: ^3x3Shape
	Buildable:
		Queue: Building.Soviets
		BuildPaletteOrder: 120
		Prerequisites: narefn, natech, ~techlevel.4
		Description: Decreases vehicle costs by 25%.\nMaximum 1 can be built.
		BuildLimit: 1
		BuildDuration: 1250
		BuildDurationModifier: 100
	Valued:
		Cost: 2000
	Tooltip:
		Name: Industrial Plant
	Tooltip@NoRow:
		Name: Industrial Plant
	ProvidesPrerequisite@default:
	Building:
		Footprint: xxx xxx xxx
		Dimensions: 3,3
	WithIdleOverlay@pistons:
		Sequence: idle-pistons
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	GrantExternalConditionToOwner:
		Condition: naindp
	Health:
		HP: 75000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 6c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	Power:
		Amount: -200
	IsometricSelectable:
		DecorationHeight: 120
	Voiced:
		VoiceSet: IndustrialPlantVoice
		Volume: 0.8

# Custom Structures
nagatea:
	Inherits: ^Gate_A
	Buildable:
		Queue: Support.Soviets, Support.Baku
		Prerequisites: ~techlevel.1
		BuildPaletteOrder: 20
		BuildDuration: 125
		BuildDurationModifier: 100
	Tooltip:
		Name: Soviet Gate
	Tooltip@NoRow:
		Name: Soviet Gate
	LineBuildNode:
		Types: nawall
	WithGateSpriteBody:
		Type: nawall
	Replacement:
		ReplaceableTypes: SovietGate
	PlaceBuildingVariants:
		Actors: nagateb

nagateb:
	Inherits: ^Gate_B
	-Buildable:
	Tooltip:
		Name: Soviet Gate
	Tooltip@NoRow:
		Name: Soviet Gate
	LineBuildNode:
		Types: nawall
	WithGateSpriteBody:
		Type: nawall
	Replacement:
		ReplaceableTypes: SovietGate

napost:
	Inherits: ^BaseBuilding
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@DRAIN: ^DiskDrainable
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@EMPULSE: ^DisabledByEMP
	Buildable:
		Queue: Support.Soviets, Support.Baku
		BuildPaletteOrder: 40
		Prerequisites: power, ~prerequisite.tesla_fence, ~techlevel.1
		Description: Defence system that creates an electric fence between 2 fence posts.\nPosts also act as small Tesla Coils.\nCan be buffed or made work during low power by Tesla Troopers.\n\nRequires power to operate.
		BuildDuration: 125
		BuildDurationModifier: 100
	Valued:
		Cost: 200
	Tooltip:
		Name: Tesla Fence Post
	Tooltip@NoRow:
		Name: Tesla Fence Post
	Health:
		HP: 50000
	Armor:
		Type: Concrete
	LineBuild:
		Range: 10
		NodeTypes: teslafencenode
		SegmentType: nafnce
		SegmentsRequireNode: true
	LineBuildNode:
		Types: teslafencenode
	Targetable@TeslaBoost:
		TargetTypes: TeslaBoost
		RequiresCondition: !powerdown
	WithTeslaChargeOverlay:
	Armament:
		Weapon: PostBolt
		LocalOffset: 0,0,30
		RequiresCondition: (!lowpower && !charged) || (lowpower && charged == 1)
	Armament@1:
		Weapon: OPPostBolt
		LocalOffset: 0,0,30
		RequiresCondition: (!lowpower && charged == 1) || (lowpower && charged == 2)
	Armament@2:
		Weapon: OPerPostBolt
		LocalOffset: 0,0,30
		RequiresCondition: (!lowpower && charged == 2) || (lowpower && charged >= 3)
	Armament@3:
		Weapon: OPestPostBolt
		LocalOffset: 0,0,30
		RequiresCondition: !lowpower && charged >= 3
	AttackTesla:
		MaxCharges: 1
		ReloadDelay: 80
		ChargeAudio: btespow.wav
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	Power:
		Amount: -10
	RevealsShroud:
		Range: 4c0
	WithIdleOverlay@LIGHTS:
		Sequence: lights
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	WithIdleOverlay@CHAINOFLIGHTS:
		Sequence: chainoflights
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	LineBuildSegmentExternalCondition:
		RequiresCondition: !build-incomplete && !disabled
		Condition: active-posts
	RequiresBuildableArea:
		Adjacent: 6
	IsometricSelectable:
		DecorationHeight: 30
	GrantConditionOnPowerState@LOWPOWER:
		RequiresCondition: !charged
	GrantCondition@IDISABLE:
		RequiresCondition: lowpower || powerdown || emp || diskdrain
	WithRangeCircle:
		Range: 3c0
		Type: teslacoil
	ExternalCondition@CHARGED:
		Condition: charged
	Voiced:
		VoiceSet: TeslaCoilVoice
		Volume: 0.8

nafnce:
	Inherits: ^Wall
	Tooltip:
		Name: Tesla Fence
	Tooltip@NoRow:
		Name: Tesla Fence
	LineBuild:
		NodeTypes: teslafence
	LineBuildNode:
		Types: teslafence
	-Crushable:
	-Sellable:
	-Targetable:
	-Building:
	Explodes:
		Weapon: UnitExplodeSmall
		EmptyWeapon: UnitExplodeSmall
	EnergyWall:
		ActiveCondition: active-posts == 2
		Weapon: TeslaFence
	GrantConditionOnLineBuildDirection@X:
		Direction: X
		Condition: teslafence-direction-x
	GrantConditionOnLineBuildDirection@Y:
		Direction: Y
		Condition: teslafence-direction-y
	-WithWallSpriteBody:
	ExternalCondition@ACTIVE:
		Condition: active-posts
	WithWallSpriteBody@XENABLED:
		RequiresCondition: teslafence-direction-x && active-posts == 2
		Type: teslafence
		Sequence: enabled-x
		Name: x-enabled
	WithWallSpriteBody@YENABLED:
		RequiresCondition: teslafence-direction-y && active-posts == 2
		Type: teslafence
		Sequence: enabled-y
		Name: y-enabled
	WithSpriteBody@XDISABLED:
		RequiresCondition: teslafence-direction-x && active-posts < 2
		Sequence: disabled-x
		Name: x-disabled
	WithSpriteBody@YDISABLED:
		RequiresCondition: teslafence-direction-y && active-posts < 2
		Sequence: disabled-y
		Name: y-disabled
	BlocksProjectiles:
		RequiresCondition: active-posts == 2
	DamageMultiplier: # Prevent all normal damage, but still allows direct kills from the post
		Modifier: 0
	Interactable:
		Bounds: 1158, 1158

nasilo:
	Inherits: ^Silo
	Buildable:
		Queue: Support.Soviets, Support.Baku
	-WithResourceLevelOverlay@FILLSTAGE:
	-WithSpriteBody:
	WithResourceLevelSpriteBody:
		Stages: 4
	GrantConditionOnFaction@Soviets:
		Condition: soviets
		Factions: russia, iraq, vietnam, cuba, libya, chile, mexico, mongolia
	GrantConditionOnFaction@Baku:
		Condition: baku
		Factions: transcaucus, turkmen, tuva, russianfed, serbia
	WithIdleOverlay@Soviets:
		Sequence: idle-hns
		RequiresCondition: !build-incomplete && soviets
	WithIdleOverlay@Baku:
		Sequence: idle-star
		RequiresCondition: !build-incomplete && baku
	IsometricSelectable:
		DecorationHeight: 45

naprop:
	Inherits: ^SupportBuilding
	Inherits@DRAIN: ^DiskDrainable
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@MC: ^MindControllableBuilding
	Buildable:
		Queue: Support.Soviets, Support.Baku
		BuildPaletteOrder: 80
		Prerequisites: natech, ~techlevel.4
		Description: Buffs fire speed of nearby units and heals them.
		BuildDuration: 125
		BuildDurationModifier: 100
	Building:
		TerrainTypes: Clear, Rough, Road, DirtRoad
	Valued:
		Cost: 500
	Tooltip:
		Name: Propaganda Tower
	Tooltip@NoRow:
		Name: Propaganda Tower
	Building:
		Footprint: x
		Dimensions: 1, 1
	Health:
		HP: 60000
	Armor:
		Type: Steel
	RevealsShroud:
		Range: 8c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 7c0
	ProximityExternalCondition@propaganda_tower:
		Condition: propaganda_tower
		Range: 8c0
		RequiresCondition: !disabled && !chronodisable
	WithRangeCircle:
		Range: 8c0
		Type: propaganda
	GrantCondition@IDISABLE:
		RequiresCondition: lowpower || powerdown || emp || diskdrain
	Capturable:
		Types: building
		RequiresCondition: !build-incomplete && !invulnerability && !forceshield
	CaptureNotification:
	Targetable:
		TargetTypes: Ground, C4, DetonateAttack, Structure, NonGarrisonableStructure
	Power:
		Amount: -25
	GpsDotAS:
		Sequence: Structure
	IsometricSelectable:
		DecorationHeight: 75

naexpn:
	Inherits: ^ExpansionNode
	# Transforms:
	#	IntoActor: exps
	RenderSprites:
		Image: gaexpn

napowb:
	Inherits: napowr
	Inherits@shape: ^2x3Shape
	-Buildable:
	-PlaceBuildingVariants:
	Building:
		Footprint: xx xx xx
		Dimensions: 2,3

narefb:
	Inherits: ^RefineryB
	FreeActor:
		Actor: harv
	ProvidesPrerequisite@narefn:
		Prerequisite: narefn
	SmokeParticleEmitter@refinerysmoke1:
		Offset: 1024,-384,4096
	SmokeParticleEmitter@refinerysmoke2:
		Offset: -128,-1408,4096
	IsometricSelectable:
		DecorationHeight: 90

narefc:
	Inherits: ^RefineryC
	FreeActor:
		Actor: harv
	ProvidesPrerequisite@narefn:
		Prerequisite: narefn
	SmokeParticleEmitter@refinerysmoke1:
		Offset: 1024,384,4096
	SmokeParticleEmitter@refinerysmoke2:
		Offset: -128,1408,4096
	IsometricSelectable:
		DecorationHeight: 90

narefd:
	Inherits: ^RefineryD
	FreeActor:
		Actor: harv
	ProvidesPrerequisite@narefn:
		Prerequisite: narefn
	SmokeParticleEmitter@refinerysmoke1:
		Offset: -1024,384,4096
	SmokeParticleEmitter@refinerysmoke2:
		Offset: 128,1408,4096
	IsometricSelectable:
		DecorationHeight: 90

naweab:
	Inherits: naweap
	Inherits@shape: ^FlippedFactoryXShape
	-Buildable:
	-PlaceBuildingVariants:
	Building:
		Footprint: xxx xxx xxx xxx ===
		Dimensions: 3,5
	RallyPoint:
		Path: 1,6
	Exit@1:
		ExitCell: 1,4

naweac:
	Inherits: naweap
	Inherits@shape: ^FlippedFactoryShape
	-Buildable:
	-PlaceBuildingVariants:
	-WithExitOverlay@front:
	-WithExitOverlay@top:
	-WithIdleOverlay@bib:
	WithIdleOverlay@lights:
		Sequence: idle-flag
	Building:
		Footprint: =xxxx =xxxx =xxxx
	RallyPoint:
		Path: -2,1
	Exit@1:
		ExitCell: 0,1

nawead:
	Inherits: naweab
	Inherits@shape: ^FlippedFactoryYShape
	-WithExitOverlay@front:
	-WithExitOverlay@top:
	-WithIdleOverlay@bib:
	WithIdleOverlay@lights:
		Sequence: idle-flag
	Building:
		Footprint: === xxx xxx xxx xxx
	RallyPoint:
		Path: 1,-2
	Exit@1:
		ExitCell: 1,0

nadepb:
	Inherits: nadept
	Inherits@shape: ^3x4Shape
	HitShape:
		TargetableOffsets: 0,0,0, 360,360,0, -360,-360,0, -1080,-1080,0, -360,-1800,0, -1800,-360,0, 360,-1080,0, -360,1080,0, -1080,360,0, 1080,-360,0
	-Buildable:
	-PlaceBuildingVariants:
	Building:
		Footprint: xxx +++ +++ +++
		Dimensions: 3,4
	RallyPoint:
		Path: 1,4
